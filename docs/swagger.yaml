basePath: /api/v1
definitions:
  domain.APIError:
    properties:
      detail:
        type: string
      errors:
        additionalProperties:
          type: string
        type: object
      status:
        type: integer
      title:
        type: string
      type:
        type: string
    type: object
  domain.AcceptOfferRequest:
    properties:
      createProject:
        description: If true, create a project from this offer
        type: boolean
      managerId:
        maxLength: 100
        type: string
      projectName:
        maxLength: 200
        type: string
    type: object
  domain.AcceptOfferResponse:
    properties:
      offer:
        $ref: '#/definitions/domain.OfferDTO'
      project:
        allOf:
        - $ref: '#/definitions/domain.ProjectDTO'
        description: Only present if createProject was true
    type: object
  domain.AcceptOrderRequest:
    properties:
      notes:
        description: Notes is an optional note about why this order was accepted
        maxLength: 500
        type: string
    type: object
  domain.AcceptOrderResponse:
    properties:
      offer:
        $ref: '#/definitions/domain.OfferDTO'
    type: object
  domain.ActivityDTO:
    properties:
      activityType:
        $ref: '#/definitions/domain.ActivityType'
      assignedToId:
        type: string
      attendees:
        items:
          type: string
        type: array
      body:
        type: string
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      completedAt:
        type: string
      createdAt:
        type: string
      creatorId:
        type: string
      creatorName:
        type: string
      dueDate:
        type: string
      durationMinutes:
        type: integer
      id:
        type: string
      isPrivate:
        type: boolean
      occurredAt:
        type: string
      parentActivityId:
        type: string
      priority:
        type: integer
      scheduledAt:
        type: string
      status:
        $ref: '#/definitions/domain.ActivityStatus'
      targetId:
        type: string
      targetName:
        type: string
      targetType:
        $ref: '#/definitions/domain.ActivityTargetType'
      title:
        type: string
    type: object
  domain.ActivityStatus:
    enum:
    - planned
    - in_progress
    - completed
    - cancelled
    type: string
    x-enum-varnames:
    - ActivityStatusPlanned
    - ActivityStatusInProgress
    - ActivityStatusCompleted
    - ActivityStatusCancelled
  domain.ActivityStatusCounts:
    properties:
      cancelled:
        type: integer
      completed:
        type: integer
      inProgress:
        type: integer
      planned:
        type: integer
    type: object
  domain.ActivityTargetType:
    enum:
    - Customer
    - Contact
    - Project
    - Offer
    - Deal
    - File
    - Notification
    - Supplier
    type: string
    x-enum-varnames:
    - ActivityTargetCustomer
    - ActivityTargetContact
    - ActivityTargetProject
    - ActivityTargetOffer
    - ActivityTargetDeal
    - ActivityTargetFile
    - ActivityTargetNotification
    - ActivityTargetSupplier
  domain.ActivityType:
    enum:
    - meeting
    - call
    - email
    - task
    - note
    - system
    type: string
    x-enum-varnames:
    - ActivityTypeMeeting
    - ActivityTypeCall
    - ActivityTypeEmail
    - ActivityTypeTask
    - ActivityTypeNote
    - ActivityTypeSystem
  domain.AddAttendeeRequest:
    properties:
      userId:
        maxLength: 100
        type: string
    required:
    - userId
    type: object
  domain.AddContactRelationshipRequest:
    properties:
      entityId:
        type: string
      entityType:
        $ref: '#/definitions/domain.ContactEntityType'
      isPrimary:
        type: boolean
      role:
        maxLength: 100
        type: string
    required:
    - entityId
    - entityType
    type: object
  domain.AddOfferBudgetItemRequest:
    properties:
      description:
        type: string
      displayOrder:
        minimum: 0
        type: integer
      expectedCost:
        minimum: 0
        type: number
      expectedMargin:
        maximum: 100
        minimum: 0
        type: number
      name:
        maxLength: 200
        type: string
      pricePerItem:
        minimum: 0
        type: number
      quantity:
        minimum: 0
        type: number
    required:
    - name
    type: object
  domain.AddOfferSupplierRequest:
    properties:
      contactId:
        type: string
      notes:
        type: string
      status:
        $ref: '#/definitions/domain.OfferSupplierStatus'
      supplierId:
        type: string
    required:
    - supplierId
    type: object
  domain.AdvanceOfferRequest:
    properties:
      createProject:
        description: If true and no ProjectID, auto-create a project when advancing
          from draft
        type: boolean
      phase:
        $ref: '#/definitions/domain.OfferPhase'
      projectId:
        description: Link to existing project
        type: string
    required:
    - phase
    type: object
  domain.AssignmentDTO:
    properties:
      assignmentNumber:
        description: e.g., "2406200"
        type: string
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      createdAt:
        description: ISO 8601
        type: string
      description:
        type: string
      dwAssignmentId:
        description: Original ID from datawarehouse
        type: integer
      dwProjectId:
        description: Project ID from datawarehouse
        type: integer
      dwSyncedAt:
        description: ISO 8601
        type: string
      fixedPriceAmount:
        description: Primary financial field
        type: number
      id:
        type: string
      offerId:
        type: string
      progressId:
        type: integer
      statusId:
        type: integer
      updatedAt:
        description: ISO 8601
        type: string
    type: object
  domain.AssignmentSummaryDTO:
    properties:
      assignmentCount:
        description: Number of assignments
        type: integer
      difference:
        description: offerValue - totalFixedPriceAmount
        type: number
      differencePercent:
        description: (difference / offerValue) * 100
        type: number
      lastSyncedAt:
        description: ISO 8601, most recent sync
        type: string
      offerId:
        type: string
      offerValue:
        description: Offer's value field
        type: number
      totalFixedPriceAmount:
        description: Sum of all assignments' FixedPriceAmount
        type: number
    type: object
  domain.AssignmentSyncResultDTO:
    properties:
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      created:
        description: Number of new assignments created
        type: integer
      deleted:
        description: Number of stale assignments removed
        type: integer
      error:
        type: string
      externalReference:
        type: string
      offerId:
        type: string
      synced:
        description: Number of assignments synced
        type: integer
      syncedAt:
        description: ISO 8601
        type: string
      updated:
        description: Number of existing assignments updated
        type: integer
    type: object
  domain.AuditAction:
    enum:
    - create
    - update
    - delete
    - login
    - logout
    - permission_grant
    - permission_revoke
    - role_assign
    - role_remove
    - export
    - import
    - api_call
    type: string
    x-enum-varnames:
    - AuditActionCreate
    - AuditActionUpdate
    - AuditActionDelete
    - AuditActionLogin
    - AuditActionLogout
    - AuditActionPermissionGrant
    - AuditActionPermissionRevoke
    - AuditActionRoleAssign
    - AuditActionRoleRemove
    - AuditActionExport
    - AuditActionImport
    - AuditActionAPICall
  domain.AuditLog:
    properties:
      action:
        $ref: '#/definitions/domain.AuditAction'
      changes:
        type: string
      companyID:
        $ref: '#/definitions/domain.CompanyID'
      createdAt:
        type: string
      entityID:
        type: string
      entityName:
        type: string
      entityType:
        type: string
      id:
        type: string
      ipaddress:
        type: string
      metadata:
        type: string
      newValues:
        type: string
      oldValues:
        type: string
      performedAt:
        type: string
      requestID:
        type: string
      userAgent:
        type: string
      userEmail:
        type: string
      userID:
        type: string
      userName:
        type: string
    type: object
  domain.AuthUserDTO:
    properties:
      company:
        $ref: '#/definitions/domain.CompanyDTO'
      email:
        type: string
      id:
        type: string
      initials:
        type: string
      isCompanyAdmin:
        type: boolean
      isSuperAdmin:
        type: boolean
      name:
        type: string
      roles:
        items:
          type: string
        type: array
    type: object
  domain.BudgetItemDTO:
    properties:
      createdAt:
        type: string
      description:
        type: string
      displayOrder:
        type: integer
      expectedCost:
        type: number
      expectedMargin:
        type: number
      expectedProfit:
        type: number
      expectedRevenue:
        type: number
      id:
        type: string
      name:
        type: string
      parentId:
        type: string
      parentType:
        $ref: '#/definitions/domain.BudgetParentType'
      pricePerItem:
        type: number
      quantity:
        type: number
      updatedAt:
        type: string
    type: object
  domain.BudgetParentType:
    enum:
    - offer
    - project
    type: string
    x-enum-varnames:
    - BudgetParentOffer
    - BudgetParentProject
  domain.BudgetSummaryDTO:
    properties:
      itemCount:
        type: integer
      marginPercent:
        type: number
      parentId:
        type: string
      parentType:
        $ref: '#/definitions/domain.BudgetParentType'
      totalCost:
        type: number
      totalProfit:
        type: number
      totalRevenue:
        type: number
    type: object
  domain.CloneOfferRequest:
    properties:
      includeBudget:
        description: Default true - clone budget items (nil treated as true)
        type: boolean
      includeFiles:
        description: Default false - files are not cloned by default
        type: boolean
      newTitle:
        maxLength: 200
        type: string
    type: object
  domain.Company:
    properties:
      color:
        type: string
      createdAt:
        type: string
      defaultOfferResponsibleId:
        type: string
      defaultProjectResponsibleId:
        type: string
      id:
        $ref: '#/definitions/domain.CompanyID'
      isActive:
        type: boolean
      logo:
        type: string
      name:
        type: string
      orgNumber:
        type: string
      shortName:
        type: string
      updatedAt:
        type: string
    type: object
  domain.CompanyDTO:
    properties:
      id:
        type: string
      name:
        type: string
    type: object
  domain.CompanyDetailDTO:
    properties:
      color:
        type: string
      createdAt:
        type: string
      defaultOfferResponsibleId:
        type: string
      defaultProjectResponsibleId:
        type: string
      id:
        type: string
      isActive:
        type: boolean
      logo:
        type: string
      name:
        type: string
      orgNumber:
        type: string
      shortName:
        type: string
      updatedAt:
        type: string
    type: object
  domain.CompanyID:
    enum:
    - all
    - gruppen
    - stalbygg
    - hybridbygg
    - industri
    - tak
    - montasje
    type: string
    x-enum-varnames:
    - CompanyAll
    - CompanyGruppen
    - CompanyStalbygg
    - CompanyHybridbygg
    - CompanyIndustri
    - CompanyTak
    - CompanyMontasje
  domain.CompleteActivityRequest:
    properties:
      outcome:
        maxLength: 500
        type: string
    type: object
  domain.ContactDTO:
    properties:
      address:
        type: string
      city:
        type: string
      contactType:
        $ref: '#/definitions/domain.ContactType'
      country:
        type: string
      createdAt:
        description: ISO 8601
        type: string
      createdById:
        description: User tracking fields
        type: string
      createdByName:
        type: string
      department:
        type: string
      email:
        type: string
      firstName:
        type: string
      fullName:
        type: string
      id:
        type: string
      isActive:
        type: boolean
      lastName:
        type: string
      linkedInUrl:
        type: string
      mobile:
        type: string
      notes:
        type: string
      phone:
        type: string
      postalCode:
        type: string
      preferredContactMethod:
        type: string
      primaryCustomerId:
        type: string
      primaryCustomerName:
        type: string
      relationships:
        items:
          $ref: '#/definitions/domain.ContactRelationshipDTO'
        type: array
      title:
        type: string
      updatedAt:
        description: ISO 8601
        type: string
      updatedById:
        type: string
      updatedByName:
        type: string
    type: object
  domain.ContactEntityType:
    enum:
    - customer
    - project
    - deal
    type: string
    x-enum-varnames:
    - ContactEntityCustomer
    - ContactEntityProject
    - ContactEntityDeal
  domain.ContactRelationshipDTO:
    properties:
      contactId:
        type: string
      createdAt:
        type: string
      entityId:
        type: string
      entityType:
        $ref: '#/definitions/domain.ContactEntityType'
      id:
        type: string
      isPrimary:
        type: boolean
      role:
        type: string
    type: object
  domain.ContactType:
    enum:
    - primary
    - secondary
    - billing
    - technical
    - executive
    - other
    type: string
    x-enum-varnames:
    - ContactTypePrimary
    - ContactTypeSecondary
    - ContactTypeBilling
    - ContactTypeTechnical
    - ContactTypeExecutive
    - ContactTypeOther
  domain.ConversionRateDTO:
    properties:
      conversionRate:
        type: number
      dealsConverted:
        type: integer
      fromStage:
        type: string
      toStage:
        type: string
      totalDeals:
        type: integer
    type: object
  domain.ConvertInquiryRequest:
    properties:
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      responsibleUserId:
        maxLength: 100
        type: string
    type: object
  domain.ConvertInquiryResponse:
    properties:
      offer:
        $ref: '#/definitions/domain.OfferDTO'
      offerNumber:
        type: string
    type: object
  domain.CreateActivityRequest:
    properties:
      activityType:
        $ref: '#/definitions/domain.ActivityType'
      assignedToId:
        maxLength: 100
        type: string
      attendees:
        items:
          type: string
        type: array
      body:
        maxLength: 2000
        type: string
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      dueDate:
        type: string
      durationMinutes:
        minimum: 1
        type: integer
      isPrivate:
        type: boolean
      priority:
        maximum: 5
        minimum: 0
        type: integer
      scheduledAt:
        type: string
      status:
        $ref: '#/definitions/domain.ActivityStatus'
      targetId:
        type: string
      targetType:
        $ref: '#/definitions/domain.ActivityTargetType'
      title:
        maxLength: 200
        type: string
    required:
    - activityType
    - targetId
    - targetType
    - title
    type: object
  domain.CreateContactRequest:
    properties:
      address:
        maxLength: 500
        type: string
      city:
        maxLength: 100
        type: string
      contactType:
        $ref: '#/definitions/domain.ContactType'
      country:
        maxLength: 100
        type: string
      department:
        maxLength: 100
        type: string
      email:
        maxLength: 255
        type: string
      firstName:
        maxLength: 100
        type: string
      lastName:
        maxLength: 100
        type: string
      linkedInUrl:
        maxLength: 500
        type: string
      mobile:
        maxLength: 50
        type: string
      notes:
        type: string
      phone:
        maxLength: 50
        type: string
      postalCode:
        maxLength: 20
        type: string
      preferredContactMethod:
        maxLength: 50
        type: string
      primaryCustomerId:
        type: string
      title:
        maxLength: 100
        type: string
    required:
    - firstName
    - lastName
    type: object
  domain.CreateCustomerRequest:
    properties:
      address:
        maxLength: 500
        type: string
      city:
        maxLength: 100
        type: string
      contactEmail:
        type: string
      contactPerson:
        maxLength: 200
        type: string
      contactPhone:
        maxLength: 50
        type: string
      country:
        maxLength: 100
        type: string
      county:
        maxLength: 100
        type: string
      creditLimit:
        type: number
      customerClass:
        maxLength: 50
        type: string
      email:
        type: string
      industry:
        $ref: '#/definitions/domain.CustomerIndustry'
      isInternal:
        type: boolean
      municipality:
        maxLength: 100
        type: string
      name:
        maxLength: 200
        type: string
      notes:
        type: string
      orgNumber:
        maxLength: 20
        type: string
      phone:
        maxLength: 50
        type: string
      postalCode:
        maxLength: 20
        type: string
      status:
        $ref: '#/definitions/domain.CustomerStatus'
      tier:
        $ref: '#/definitions/domain.CustomerTier'
      website:
        maxLength: 500
        type: string
    required:
    - country
    - name
    type: object
  domain.CreateDealRequest:
    properties:
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      currency:
        maxLength: 3
        type: string
      customerId:
        type: string
      description:
        type: string
      expectedCloseDate:
        type: string
      notes:
        type: string
      offerId:
        type: string
      ownerId:
        maxLength: 100
        type: string
      probability:
        maximum: 100
        minimum: 0
        type: integer
      source:
        maxLength: 100
        type: string
      stage:
        $ref: '#/definitions/domain.DealStage'
      title:
        maxLength: 200
        type: string
      value:
        minimum: 0
        type: number
    required:
    - companyId
    - customerId
    - ownerId
    - title
    type: object
  domain.CreateFollowUpRequest:
    properties:
      assignedToId:
        maxLength: 100
        type: string
      description:
        maxLength: 2000
        type: string
      dueDate:
        type: string
      title:
        maxLength: 200
        type: string
    required:
    - title
    type: object
  domain.CreateInquiryRequest:
    properties:
      customerId:
        type: string
      description:
        type: string
      dueDate:
        type: string
      responsible:
        maxLength: 200
        type: string
      title:
        maxLength: 200
        type: string
    required:
    - title
    type: object
  domain.CreateOfferFromDealRequest:
    properties:
      templateOfferId:
        description: 'Optional: copy budget dimensions from this offer'
        type: string
      title:
        maxLength: 200
        type: string
    type: object
  domain.CreateOfferFromDealResponse:
    properties:
      deal:
        $ref: '#/definitions/domain.DealDTO'
      offer:
        $ref: '#/definitions/domain.OfferDTO'
    type: object
  domain.CreateOfferItemRequest:
    properties:
      cost:
        minimum: 0
        type: number
      description:
        type: string
      discipline:
        maxLength: 200
        type: string
      quantity:
        minimum: 0
        type: number
      revenue:
        minimum: 0
        type: number
      unit:
        maxLength: 50
        type: string
    required:
    - cost
    - discipline
    - revenue
    type: object
  domain.CreateOfferRequest:
    properties:
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      cost:
        minimum: 0
        type: number
      createProject:
        description: If true and no ProjectID, auto-create a project
        type: boolean
      customerId:
        description: Optional if projectId is provided (inherits from project)
        type: string
      description:
        type: string
      dueDate:
        type: string
      expirationDate:
        description: Optional, defaults to 60 days after sent date
        type: string
      items:
        items:
          $ref: '#/definitions/domain.CreateOfferItemRequest'
        type: array
      location:
        maxLength: 200
        type: string
      notes:
        type: string
      phase:
        $ref: '#/definitions/domain.OfferPhase'
      probability:
        maximum: 100
        minimum: 0
        type: integer
      projectId:
        description: Link to existing project
        type: string
      responsibleUserId:
        type: string
      sentDate:
        type: string
      status:
        $ref: '#/definitions/domain.OfferStatus'
      title:
        maxLength: 200
        type: string
    required:
    - title
    type: object
  domain.CreateProjectRequest:
    properties:
      description:
        type: string
      endDate:
        type: string
      name:
        maxLength: 200
        type: string
      startDate:
        type: string
    required:
    - name
    type: object
  domain.CreateSupplierContactRequest:
    properties:
      email:
        type: string
      firstName:
        maxLength: 100
        type: string
      isPrimary:
        type: boolean
      lastName:
        maxLength: 100
        type: string
      notes:
        type: string
      phone:
        maxLength: 50
        type: string
      title:
        maxLength: 200
        type: string
    required:
    - firstName
    - lastName
    type: object
  domain.CreateSupplierRequest:
    properties:
      address:
        maxLength: 500
        type: string
      category:
        maxLength: 200
        type: string
      city:
        maxLength: 100
        type: string
      contactEmail:
        type: string
      contactPerson:
        maxLength: 200
        type: string
      contactPhone:
        maxLength: 50
        type: string
      country:
        maxLength: 100
        type: string
      county:
        maxLength: 100
        type: string
      email:
        type: string
      municipality:
        maxLength: 100
        type: string
      name:
        maxLength: 200
        type: string
      notes:
        type: string
      orgNumber:
        maxLength: 20
        type: string
      paymentTerms:
        maxLength: 200
        type: string
      phone:
        maxLength: 50
        type: string
      postalCode:
        maxLength: 20
        type: string
      status:
        $ref: '#/definitions/domain.SupplierStatus'
      website:
        maxLength: 500
        type: string
    required:
    - country
    - name
    type: object
  domain.CustomerDTO:
    properties:
      activeOffers:
        type: integer
      address:
        type: string
      city:
        type: string
      contactEmail:
        type: string
      contactPerson:
        type: string
      contactPhone:
        type: string
      country:
        type: string
      county:
        type: string
      createdAt:
        description: ISO 8601
        type: string
      createdById:
        description: User tracking fields
        type: string
      createdByName:
        type: string
      creditLimit:
        type: number
      customerClass:
        type: string
      email:
        type: string
      id:
        type: string
      industry:
        $ref: '#/definitions/domain.CustomerIndustry'
      isInternal:
        type: boolean
      municipality:
        type: string
      name:
        type: string
      notes:
        type: string
      orgNumber:
        type: string
      phone:
        type: string
      postalCode:
        type: string
      status:
        $ref: '#/definitions/domain.CustomerStatus'
      tier:
        $ref: '#/definitions/domain.CustomerTier'
      totalValueActive:
        description: Value of offers in in_progress or sent phases
        type: number
      totalValueWon:
        description: Value of offers in order or completed phases
        type: number
      updatedAt:
        description: ISO 8601
        type: string
      updatedById:
        type: string
      updatedByName:
        type: string
      website:
        type: string
    type: object
  domain.CustomerERPDifferencesResponse:
    properties:
      dataWarehouseEnabled:
        description: Whether data warehouse is available
        type: boolean
      erpCustomerCount:
        description: Total customers in ERP
        type: integer
      localCustomerCount:
        description: Total customers in our DB
        type: integer
      missingInERP:
        description: Customers in local DB but not in ERP
        items:
          $ref: '#/definitions/domain.LocalCustomerDTO'
        type: array
      missingInLocal:
        description: Customers in ERP but not in local DB
        items:
          $ref: '#/definitions/domain.ERPCustomerDTO'
        type: array
      syncedAt:
        description: ISO 8601 - When the comparison was performed
        type: string
    type: object
  domain.CustomerIndustry:
    enum:
    - construction
    - manufacturing
    - retail
    - logistics
    - agriculture
    - energy
    - public_sector
    - real_estate
    - other
    type: string
    x-enum-varnames:
    - CustomerIndustryConstruction
    - CustomerIndustryManufacturing
    - CustomerIndustryRetail
    - CustomerIndustryLogistics
    - CustomerIndustryAgriculture
    - CustomerIndustryEnergy
    - CustomerIndustryPublicSector
    - CustomerIndustryRealEstate
    - CustomerIndustryOther
  domain.CustomerMinimalDTO:
    properties:
      id:
        type: string
      name:
        type: string
    type: object
  domain.CustomerStatsDTO:
    properties:
      activeDeals:
        type: integer
      activeOffers:
        description: Count of offers in order phase (active orders)
        type: integer
      activeProjects:
        type: integer
      completedOffers:
        description: Count of offers in completed phase
        type: integer
      fileCount:
        description: Count of files attached to the customer
        type: integer
      totalContacts:
        type: integer
      totalOffers:
        type: integer
      totalProjects:
        type: integer
      totalValueActive:
        description: Value of offers in order phase (active orders)
        type: number
      totalValueWon:
        description: Value of offers in order or completed phases
        type: number
      workingOffers:
        description: Count of offers in in_progress or sent phases
        type: integer
    type: object
  domain.CustomerStatus:
    enum:
    - active
    - inactive
    - lead
    - churned
    type: string
    x-enum-varnames:
    - CustomerStatusActive
    - CustomerStatusInactive
    - CustomerStatusLead
    - CustomerStatusChurned
  domain.CustomerTier:
    enum:
    - bronze
    - silver
    - gold
    - platinum
    type: string
    x-enum-varnames:
    - CustomerTierBronze
    - CustomerTierSilver
    - CustomerTierGold
    - CustomerTierPlatinum
  domain.CustomerWithDetailsDTO:
    properties:
      activeDeals:
        items:
          $ref: '#/definitions/domain.DealDTO'
        type: array
      activeOffers:
        type: integer
      activeProjects:
        items:
          $ref: '#/definitions/domain.ProjectDTO'
        type: array
      address:
        type: string
      city:
        type: string
      contactEmail:
        type: string
      contactPerson:
        type: string
      contactPhone:
        type: string
      contacts:
        items:
          $ref: '#/definitions/domain.ContactDTO'
        type: array
      country:
        type: string
      county:
        type: string
      createdAt:
        description: ISO 8601
        type: string
      createdById:
        description: User tracking fields
        type: string
      createdByName:
        type: string
      creditLimit:
        type: number
      customerClass:
        type: string
      email:
        type: string
      id:
        type: string
      industry:
        $ref: '#/definitions/domain.CustomerIndustry'
      isInternal:
        type: boolean
      municipality:
        type: string
      name:
        type: string
      notes:
        type: string
      orgNumber:
        type: string
      phone:
        type: string
      postalCode:
        type: string
      stats:
        $ref: '#/definitions/domain.CustomerStatsDTO'
      status:
        $ref: '#/definitions/domain.CustomerStatus'
      tier:
        $ref: '#/definitions/domain.CustomerTier'
      totalValueActive:
        description: Value of offers in in_progress or sent phases
        type: number
      totalValueWon:
        description: Value of offers in order or completed phases
        type: number
      updatedAt:
        description: ISO 8601
        type: string
      updatedById:
        type: string
      updatedByName:
        type: string
      website:
        type: string
    type: object
  domain.DashboardMetrics:
    properties:
      activeOrderCount:
        description: |-
          Order Metrics (from offers in order and completed phases)
          Execution tracking has moved from projects to offers
        type: integer
      averageOrderProgress:
        description: Average completion_percent for order phase offers
        type: number
      averageProbability:
        description: Average probability of active offers
        type: number
      completedOrderCount:
        description: Count of offers in completed phase
        type: integer
      fromDate:
        description: FromDate is set when using custom date range (start of range,
          00:00:00)
        type: string
      healthDistribution:
        allOf:
        - $ref: '#/definitions/domain.HealthDistribution'
        description: Count of order phase offers by health status
      offerReserve:
        description: Total value of active offers - best per project (avoids double-counting)
        type: number
      orderReserve:
        description: Sum of (value - invoiced) for order phase offers
        type: number
      orderValue:
        description: Total value of offers in order phase
        type: number
      pipeline:
        description: |-
          Pipeline Data (phases: in_progress, sent, order, lost - excludes draft and expired)
          Uses aggregation: for projects with multiple offers, only the highest value per phase is counted
        items:
          $ref: '#/definitions/domain.PipelinePhaseData'
        type: array
      recentActivities:
        description: Last activities
        items:
          $ref: '#/definitions/domain.ActivityDTO'
        type: array
      recentOffers:
        description: Recent Lists (limit 5 each)
        items:
          $ref: '#/definitions/domain.OfferDTO'
        type: array
      recentOrders:
        description: Offers in order phase (Siste ordre), sorted by updated_at DESC
        items:
          $ref: '#/definitions/domain.OfferDTO'
        type: array
      timeRange:
        allOf:
        - $ref: '#/definitions/domain.TimeRange'
        description: TimeRange indicates the time range used for the metrics
      toDate:
        description: ToDate is set when using custom date range (end of range, 23:59:59)
        type: string
      topCustomers:
        description: Top Customers (limit 5)
        items:
          $ref: '#/definitions/domain.TopCustomerDTO'
        type: array
      totalInvoiced:
        description: Sum of invoiced for order phase offers
        type: number
      totalOfferCount:
        description: Offer Metrics (excluding drafts and expired)
        type: integer
      totalProjectCount:
        description: Count of unique projects with offers (excludes orphan offers)
        type: integer
      totalSpent:
        description: Sum of spent for order phase offers
        type: number
      totalValue:
        description: Financial Summary
        type: number
      weightedOfferReserve:
        description: Sum of (value * probability/100) for active offers
        type: number
      winRateMetrics:
        allOf:
        - $ref: '#/definitions/domain.WinRateMetrics'
        description: Win Rate Metrics
    type: object
  domain.DataWarehouseFinancialsDTO:
    properties:
      connected:
        description: Whether data warehouse connection was successful
        type: boolean
      employeeCosts:
        description: Sum of employee cost accounts (5000-5999)
        type: number
      materialCosts:
        description: Sum of material cost accounts (4000-4999)
        type: number
      netResult:
        description: totalIncome - all costs
        type: number
      otherCosts:
        description: Sum of other cost accounts (>=6000)
        type: number
      totalIncome:
        description: Sum of income accounts (3000-3999)
        type: number
    type: object
  domain.DealDTO:
    properties:
      actualCloseDate:
        type: string
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      createdAt:
        type: string
      currency:
        type: string
      customerId:
        type: string
      customerName:
        type: string
      description:
        type: string
      expectedCloseDate:
        type: string
      id:
        type: string
      lossReasonCategory:
        $ref: '#/definitions/domain.LossReasonCategory'
      lostReason:
        type: string
      notes:
        type: string
      offerId:
        type: string
      ownerId:
        type: string
      ownerName:
        type: string
      probability:
        type: integer
      source:
        type: string
      stage:
        $ref: '#/definitions/domain.DealStage'
      title:
        type: string
      updatedAt:
        type: string
      value:
        type: number
      weightedValue:
        type: number
    type: object
  domain.DealStage:
    enum:
    - lead
    - qualified
    - proposal
    - negotiation
    - won
    - lost
    type: string
    x-enum-varnames:
    - DealStageLead
    - DealStageQualified
    - DealStageProposal
    - DealStageNegotiation
    - DealStageWon
    - DealStageLost
  domain.DealStageHistoryDTO:
    properties:
      changedAt:
        type: string
      changedById:
        type: string
      changedByName:
        type: string
      dealId:
        type: string
      fromStage:
        $ref: '#/definitions/domain.DealStage'
      id:
        type: string
      notes:
        type: string
      toStage:
        $ref: '#/definitions/domain.DealStage'
    type: object
  domain.ERPCustomerDTO:
    properties:
      name:
        type: string
      organizationNumber:
        type: string
    type: object
  domain.ErrorResponse:
    properties:
      code:
        type: integer
      error:
        type: string
      message:
        type: string
    type: object
  domain.FileDTO:
    properties:
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      contentType:
        type: string
      createdAt:
        type: string
      customerId:
        type: string
      filename:
        type: string
      id:
        type: string
      offerId:
        type: string
      offerSupplierId:
        type: string
      projectId:
        type: string
      size:
        type: integer
      supplierId:
        type: string
    type: object
  domain.FuzzyCustomerSearchResponse:
    properties:
      confidence:
        description: 0-1 score indicating match quality
        type: number
      customer:
        allOf:
        - $ref: '#/definitions/domain.CustomerMinimalDTO'
        description: Single best match
      customers:
        description: All customers (when query is "all")
        items:
          $ref: '#/definitions/domain.CustomerMinimalDTO'
        type: array
      found:
        type: boolean
    type: object
  domain.HealthDistribution:
    properties:
      atRisk:
        description: Offers at risk
        type: integer
      delayed:
        description: Delayed offers
        type: integer
      onTrack:
        description: Offers on track
        type: integer
      overBudget:
        description: Over budget offers
        type: integer
    type: object
  domain.LocalCustomerDTO:
    properties:
      id:
        type: string
      name:
        type: string
      organizationNumber:
        type: string
    type: object
  domain.LoseDealRequest:
    properties:
      notes:
        example: Lost to competitor XYZ who offered lower price
        maxLength: 500
        minLength: 10
        type: string
      reason:
        allOf:
        - $ref: '#/definitions/domain.LossReasonCategory'
        enum:
        - price
        - timing
        - competitor
        - requirements
        - other
        example: competitor
    required:
    - notes
    - reason
    type: object
  domain.LossReasonCategory:
    enum:
    - price
    - timing
    - competitor
    - requirements
    - other
    type: string
    x-enum-varnames:
    - LossReasonPrice
    - LossReasonTiming
    - LossReasonCompetitor
    - LossReasonRequirements
    - LossReasonOther
  domain.NextOfferNumberResponse:
    properties:
      companyId:
        allOf:
        - $ref: '#/definitions/domain.CompanyID'
        description: The company ID this number is for
      nextOfferNumber:
        description: The next offer number that would be assigned, e.g., "TK-2025-001"
        type: string
      year:
        description: The year component of the number
        type: integer
    type: object
  domain.NotificationDTO:
    properties:
      createdAt:
        description: ISO 8601
        type: string
      entityId:
        type: string
      entityType:
        type: string
      id:
        type: string
      message:
        type: string
      read:
        type: boolean
      title:
        type: string
      type:
        type: string
    type: object
  domain.OfferDTO:
    properties:
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      completionPercent:
        description: 0-100 progress indicator
        type: number
      cost:
        description: Internal cost
        type: number
      createdAt:
        description: ISO 8601
        type: string
      createdById:
        description: User tracking fields
        type: string
      createdByName:
        type: string
      customerHasWonProject:
        description: Whether customer has won their project
        type: boolean
      customerId:
        description: Optional - offer can exist without customer
        type: string
      customerName:
        type: string
      description:
        type: string
      dueDate:
        description: ISO 8601
        type: string
      dwEmployeeCosts:
        description: Employee costs from data warehouse
        type: number
      dwLastSyncedAt:
        description: ISO 8601 - Last sync timestamp
        type: string
      dwMaterialCosts:
        description: Material costs from data warehouse
        type: number
      dwNetResult:
        description: Net result from data warehouse
        type: number
      dwOtherCosts:
        description: Other costs from data warehouse
        type: number
      dwTotalFixedPrice:
        description: Sum of FixedPriceAmount from synced assignments
        type: number
      dwTotalIncome:
        description: Data Warehouse synced fields
        type: number
      endDate:
        description: ISO 8601 - Planned end date
        type: string
      estimatedCompletionDate:
        description: ISO 8601 - Current estimate for completion
        type: string
      expirationDate:
        description: ISO 8601 - When offer expires (default 60 days after sent)
        type: string
      externalReference:
        description: External/customer reference number
        type: string
      health:
        description: Health status during execution
        type: string
      id:
        type: string
      invoiced:
        description: Amount invoiced to customer
        type: number
      items:
        items:
          $ref: '#/definitions/domain.OfferItemDTO'
        type: array
      location:
        type: string
      managerId:
        description: Order phase execution fields (used when phase = "order" or "completed")
        type: string
      managerName:
        type: string
      margin:
        description: 'Calculated: Value - Cost'
        type: number
      marginPercent:
        description: 'Dekningsgrad: (Value - Cost) / Value * 100'
        type: number
      notes:
        type: string
      offerNumber:
        description: Internal number, e.g., "TK-2025-001"
        type: string
      orderReserve:
        description: 'Generated column: value - invoiced (read-only)'
        type: number
      phase:
        $ref: '#/definitions/domain.OfferPhase'
      probability:
        type: integer
      projectId:
        description: Link to project (nullable)
        type: string
      projectName:
        type: string
      responsibleUserId:
        type: string
      responsibleUserName:
        type: string
      sentDate:
        description: ISO 8601
        type: string
      spent:
        description: Actual costs incurred
        type: number
      startDate:
        description: ISO 8601 - When work started
        type: string
      status:
        $ref: '#/definitions/domain.OfferStatus'
      teamMembers:
        items:
          type: string
        type: array
      title:
        type: string
      updatedAt:
        description: ISO 8601
        type: string
      updatedById:
        type: string
      updatedByName:
        type: string
      value:
        type: number
      warnings:
        description: |-
          Validation warnings - computed at DTO mapping time
          Possible values: value.not.equals.dwTotalFixedPrice, missing.dwTotalFixedPrice
        items:
          $ref: '#/definitions/domain.OfferWarning'
          enum:
          - value.not.equals.dwTotalFixedPrice
          - missing.dwTotalFixedPrice
        type: array
    type: object
  domain.OfferDetailDTO:
    properties:
      budgetItems:
        items:
          $ref: '#/definitions/domain.BudgetItemDTO'
        type: array
      budgetSummary:
        $ref: '#/definitions/domain.BudgetSummaryDTO'
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      completionPercent:
        description: 0-100 progress indicator
        type: number
      cost:
        description: Internal cost
        type: number
      createdAt:
        description: ISO 8601
        type: string
      createdById:
        description: User tracking fields
        type: string
      createdByName:
        type: string
      customerHasWonProject:
        description: Whether customer has won their project
        type: boolean
      customerId:
        description: Optional - offer can exist without customer
        type: string
      customerName:
        type: string
      description:
        type: string
      dueDate:
        description: ISO 8601
        type: string
      dwEmployeeCosts:
        description: Employee costs from data warehouse
        type: number
      dwLastSyncedAt:
        description: ISO 8601 - Last sync timestamp
        type: string
      dwMaterialCosts:
        description: Material costs from data warehouse
        type: number
      dwNetResult:
        description: Net result from data warehouse
        type: number
      dwOtherCosts:
        description: Other costs from data warehouse
        type: number
      dwTotalFixedPrice:
        description: Sum of FixedPriceAmount from synced assignments
        type: number
      dwTotalIncome:
        description: Data Warehouse synced fields
        type: number
      endDate:
        description: ISO 8601 - Planned end date
        type: string
      estimatedCompletionDate:
        description: ISO 8601 - Current estimate for completion
        type: string
      expirationDate:
        description: ISO 8601 - When offer expires (default 60 days after sent)
        type: string
      externalReference:
        description: External/customer reference number
        type: string
      filesCount:
        type: integer
      health:
        description: Health status during execution
        type: string
      id:
        type: string
      invoiced:
        description: Amount invoiced to customer
        type: number
      items:
        items:
          $ref: '#/definitions/domain.OfferItemDTO'
        type: array
      location:
        type: string
      managerId:
        description: Order phase execution fields (used when phase = "order" or "completed")
        type: string
      managerName:
        type: string
      margin:
        description: 'Calculated: Value - Cost'
        type: number
      marginPercent:
        description: 'Dekningsgrad: (Value - Cost) / Value * 100'
        type: number
      notes:
        type: string
      offerNumber:
        description: Internal number, e.g., "TK-2025-001"
        type: string
      orderReserve:
        description: 'Generated column: value - invoiced (read-only)'
        type: number
      phase:
        $ref: '#/definitions/domain.OfferPhase'
      probability:
        type: integer
      projectId:
        description: Link to project (nullable)
        type: string
      projectName:
        type: string
      responsibleUserId:
        type: string
      responsibleUserName:
        type: string
      sentDate:
        description: ISO 8601
        type: string
      spent:
        description: Actual costs incurred
        type: number
      startDate:
        description: ISO 8601 - When work started
        type: string
      status:
        $ref: '#/definitions/domain.OfferStatus'
      teamMembers:
        items:
          type: string
        type: array
      title:
        type: string
      updatedAt:
        description: ISO 8601
        type: string
      updatedById:
        type: string
      updatedByName:
        type: string
      value:
        type: number
      warnings:
        description: |-
          Validation warnings - computed at DTO mapping time
          Possible values: value.not.equals.dwTotalFixedPrice, missing.dwTotalFixedPrice
        items:
          $ref: '#/definitions/domain.OfferWarning'
          enum:
          - value.not.equals.dwTotalFixedPrice
          - missing.dwTotalFixedPrice
        type: array
    type: object
  domain.OfferExternalSyncResponse:
    properties:
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      dataWarehouse:
        $ref: '#/definitions/domain.DataWarehouseFinancialsDTO'
      dwEmployeeCosts:
        description: Persisted DW employee costs
        type: number
      dwMaterialCosts:
        description: Persisted DW material costs
        type: number
      dwNetResult:
        description: Persisted DW net result
        type: number
      dwOtherCosts:
        description: Persisted DW other costs
        type: number
      dwTotalFixedPrice:
        description: Sum of FixedPriceAmount from synced assignments
        type: number
      dwTotalIncome:
        description: Current offer financial values after sync
        type: number
      externalReference:
        type: string
      invoiced:
        description: Updated if was 0, otherwise unchanged
        type: number
      offerId:
        type: string
      persisted:
        description: Whether data was persisted to the offer
        type: boolean
      spent:
        description: Updated if was 0, otherwise unchanged
        type: number
      syncedAt:
        description: ISO 8601 - When the sync was performed
        type: string
    type: object
  domain.OfferHealth:
    enum:
    - on_track
    - at_risk
    - delayed
    - over_budget
    type: string
    x-enum-varnames:
    - OfferHealthOnTrack
    - OfferHealthAtRisk
    - OfferHealthDelayed
    - OfferHealthOverBudget
  domain.OfferItemDTO:
    properties:
      cost:
        type: number
      description:
        type: string
      discipline:
        type: string
      id:
        type: string
      margin:
        type: number
      quantity:
        type: number
      revenue:
        type: number
      unit:
        type: string
    type: object
  domain.OfferPhase:
    enum:
    - draft
    - in_progress
    - sent
    - order
    - completed
    - lost
    - expired
    type: string
    x-enum-comments:
      OfferPhaseCompleted: Work finished
      OfferPhaseOrder: Customer accepted, work in progress
    x-enum-descriptions:
    - ""
    - ""
    - ""
    - Customer accepted, work in progress
    - Work finished
    - ""
    - ""
    x-enum-varnames:
    - OfferPhaseDraft
    - OfferPhaseInProgress
    - OfferPhaseSent
    - OfferPhaseOrder
    - OfferPhaseCompleted
    - OfferPhaseLost
    - OfferPhaseExpired
  domain.OfferStatus:
    enum:
    - active
    - inactive
    - archived
    type: string
    x-enum-varnames:
    - OfferStatusActive
    - OfferStatusInactive
    - OfferStatusArchived
  domain.OfferSupplierDTO:
    properties:
      createdAt:
        type: string
      id:
        type: string
      notes:
        type: string
      offerId:
        type: string
      offerTitle:
        type: string
      status:
        $ref: '#/definitions/domain.OfferSupplierStatus'
      supplierId:
        type: string
      supplierName:
        type: string
      updatedAt:
        type: string
    type: object
  domain.OfferSupplierStatus:
    enum:
    - active
    - done
    type: string
    x-enum-varnames:
    - OfferSupplierStatusActive
    - OfferSupplierStatusDone
  domain.OfferSupplierWithDetailsDTO:
    properties:
      contact:
        $ref: '#/definitions/domain.SupplierContactDTO'
      contactId:
        description: Contact person for this offer (optional)
        type: string
      contactName:
        type: string
      createdAt:
        type: string
      id:
        description: Relationship fields
        type: string
      notes:
        type: string
      offerId:
        type: string
      status:
        $ref: '#/definitions/domain.OfferSupplierStatus'
      supplier:
        allOf:
        - $ref: '#/definitions/domain.SupplierDTO'
        description: Supplier details
      updatedAt:
        type: string
    type: object
  domain.OfferWarning:
    enum:
    - value.not.equals.dwTotalFixedPrice
    - missing.dwTotalFixedPrice
    type: string
    x-enum-varnames:
    - OfferWarningValueNotEqualsDWTotalFixedPrice
    - OfferWarningMissingDWTotalFixedPrice
  domain.OfferWithItemsDTO:
    properties:
      companyId:
        $ref: '#/definitions/domain.CompanyID'
      createdAt:
        type: string
      customerId:
        description: Optional - offer can exist without customer
        type: string
      customerName:
        type: string
      description:
        type: string
      externalReference:
        description: External/customer reference number
        type: string
      id:
        type: string
      items:
        items:
          $ref: '#/definitions/domain.OfferItemDTO'
        type: array
      notes:
        type: string
      offerNumber:
        description: Internal number, e.g., "TK-2025-001"
        type: string
      phase:
        $ref: '#/definitions/domain.OfferPhase'
      probability:
        type: integer
      responsibleUserId:
        type: string
      responsibleUserName:
        type: string
      status:
        $ref: '#/definitions/domain.OfferStatus'
      title:
        type: string
      updatedAt:
        type: string
      value:
        type: number
    type: object
  domain.PaginatedResponse:
    properties:
      data: {}
      page:
        type: integer
      pageSize:
        type: integer
      total:
        type: integer
      totalPages:
        type: integer
    type: object
  domain.PermissionDTO:
    properties:
      action:
        type: string
      allowed:
        type: boolean
      resource:
        type: string
    type: object
  domain.PermissionsResponseDTO:
    properties:
      isSuperAdmin:
        type: boolean
      permissions:
        items:
          $ref: '#/definitions/domain.PermissionDTO'
        type: array
      roles:
        items:
          type: string
        type: array
    type: object
  domain.PipelineAnalyticsDTO:
    properties:
      conversionRates:
        items:
          $ref: '#/definitions/domain.ConversionRateDTO'
        type: array
      forecast30Days:
        $ref: '#/definitions/domain.RevenueForecastDTO'
      forecast90Days:
        $ref: '#/definitions/domain.RevenueForecastDTO'
      generatedAt:
        type: string
      summary:
        items:
          $ref: '#/definitions/domain.StageSummaryDTO'
        type: array
      winRateAnalysis:
        $ref: '#/definitions/domain.WinRateAnalysisDTO'
    type: object
  domain.PipelinePhaseData:
    properties:
      count:
        description: Total offer count in this phase
        type: integer
      offers:
        items:
          $ref: '#/definitions/domain.OfferDTO'
        type: array
      phase:
        $ref: '#/definitions/domain.OfferPhase'
      projectCount:
        description: Unique projects in this phase (excludes orphan offers)
        type: integer
      totalValue:
        description: Sum of best offer value per project (avoids double-counting)
        type: number
      weightedValue:
        description: Weighted by probability
        type: number
    type: object
  domain.ProjectDTO:
    properties:
      createdAt:
        description: ISO 8601
        type: string
      createdById:
        description: User tracking fields
        type: string
      createdByName:
        type: string
      customerId:
        description: Optional - projects can be cross-company
        type: string
      customerName:
        type: string
      dealId:
        type: string
      description:
        type: string
      endDate:
        description: ISO 8601
        type: string
      externalReference:
        type: string
      fileCount:
        description: Count of files attached to this project
        type: integer
      id:
        type: string
      location:
        type: string
      name:
        type: string
      offerCount:
        description: Count of offers linked to this project
        type: integer
      phase:
        $ref: '#/definitions/domain.ProjectPhase'
      projectNumber:
        type: string
      startDate:
        description: ISO 8601
        type: string
      summary:
        type: string
      updatedAt:
        description: ISO 8601
        type: string
      updatedById:
        type: string
      updatedByName:
        type: string
    type: object
  domain.ProjectPhase:
    enum:
    - tilbud
    - working
    - on_hold
    - completed
    - cancelled
    type: string
    x-enum-varnames:
    - ProjectPhaseTilbud
    - ProjectPhaseWorking
    - ProjectPhaseOnHold
    - ProjectPhaseCompleted
    - ProjectPhaseCancelled
  domain.ProjectWithDetailsDTO:
    properties:
      budgetSummary:
        $ref: '#/definitions/domain.BudgetSummaryDTO'
      createdAt:
        description: ISO 8601
        type: string
      createdById:
        description: User tracking fields
        type: string
      createdByName:
        type: string
      customerId:
        description: Optional - projects can be cross-company
        type: string
      customerName:
        type: string
      deal:
        $ref: '#/definitions/domain.DealDTO'
      dealId:
        type: string
      description:
        type: string
      endDate:
        description: ISO 8601
        type: string
      externalReference:
        type: string
      fileCount:
        description: Count of files attached to this project
        type: integer
      id:
        type: string
      location:
        type: string
      name:
        type: string
      offer:
        $ref: '#/definitions/domain.OfferDTO'
      offerCount:
        description: Count of offers linked to this project
        type: integer
      phase:
        $ref: '#/definitions/domain.ProjectPhase'
      projectNumber:
        type: string
      recentActivities:
        items:
          $ref: '#/definitions/domain.ActivityDTO'
        type: array
      startDate:
        description: ISO 8601
        type: string
      summary:
        type: string
      updatedAt:
        description: ISO 8601
        type: string
      updatedById:
        type: string
      updatedByName:
        type: string
    type: object
  domain.RejectOfferRequest:
    properties:
      reason:
        maxLength: 500
        type: string
    type: object
  domain.ReopenProjectRequest:
    properties:
      notes:
        maxLength: 1000
        type: string
      targetPhase:
        allOf:
        - $ref: '#/definitions/domain.ProjectPhase'
        enum:
        - tilbud
        - working
    required:
    - targetPhase
    type: object
  domain.ReopenProjectResponse:
    properties:
      clearedOfferId:
        description: Whether WinningOfferID was cleared
        type: boolean
      clearedOfferValue:
        description: Whether economic values were cleared
        type: boolean
      previousPhase:
        type: string
      project:
        $ref: '#/definitions/domain.ProjectDTO'
      revertedOffer:
        allOf:
        - $ref: '#/definitions/domain.OfferDTO'
        description: Offer that was reverted to sent (if any)
    type: object
  domain.ReorderBudgetItemsRequest:
    properties:
      orderedIds:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - orderedIds
    type: object
  domain.RevenueForecastDTO:
    properties:
      dealCount:
        type: integer
      period:
        description: '"30d" or "90d"'
        type: string
      totalValue:
        type: number
      weightedValue:
        type: number
    type: object
  domain.SearchResult:
    properties:
      id:
        type: string
      metadata:
        type: string
      subtitle:
        type: string
      title:
        type: string
      type:
        type: string
    type: object
  domain.StageSummaryDTO:
    properties:
      avgDealValue:
        type: number
      avgProbability:
        type: number
      dealCount:
        type: integer
      overdueCount:
        type: integer
      stage:
        type: string
      totalValue:
        type: number
      weightedValue:
        type: number
    type: object
  domain.SupplierContactDTO:
    properties:
      createdAt:
        type: string
      email:
        type: string
      firstName:
        type: string
      fullName:
        type: string
      id:
        type: string
      isPrimary:
        type: boolean
      lastName:
        type: string
      notes:
        type: string
      phone:
        type: string
      supplierId:
        type: string
      title:
        type: string
      updatedAt:
        type: string
    type: object
  domain.SupplierDTO:
    properties:
      address:
        type: string
      category:
        type: string
      city:
        type: string
      contactEmail:
        type: string
      contactPerson:
        type: string
      contactPhone:
        type: string
      country:
        type: string
      county:
        type: string
      createdAt:
        type: string
      createdById:
        type: string
      createdByName:
        type: string
      email:
        type: string
      fileCount:
        description: Count of files attached to this supplier
        type: integer
      id:
        type: string
      municipality:
        type: string
      name:
        type: string
      notes:
        type: string
      orgNumber:
        type: string
      paymentTerms:
        type: string
      phone:
        type: string
      postalCode:
        type: string
      status:
        $ref: '#/definitions/domain.SupplierStatus'
      updatedAt:
        type: string
      updatedById:
        type: string
      updatedByName:
        type: string
      website:
        type: string
    type: object
  domain.SupplierStatsDTO:
    properties:
      activeOffers:
        type: integer
      completedOffers:
        type: integer
      totalOffers:
        type: integer
      totalProjects:
        type: integer
    type: object
  domain.SupplierStatus:
    enum:
    - active
    - inactive
    - pending
    - blacklisted
    type: string
    x-enum-varnames:
    - SupplierStatusActive
    - SupplierStatusInactive
    - SupplierStatusPending
    - SupplierStatusBlacklisted
  domain.SupplierWithDetailsDTO:
    properties:
      address:
        type: string
      category:
        type: string
      city:
        type: string
      contactEmail:
        type: string
      contactPerson:
        type: string
      contactPhone:
        type: string
      contacts:
        items:
          $ref: '#/definitions/domain.SupplierContactDTO'
        type: array
      country:
        type: string
      county:
        type: string
      createdAt:
        type: string
      createdById:
        type: string
      createdByName:
        type: string
      email:
        type: string
      fileCount:
        description: Count of files attached to this supplier
        type: integer
      id:
        type: string
      municipality:
        type: string
      name:
        type: string
      notes:
        type: string
      orgNumber:
        type: string
      paymentTerms:
        type: string
      phone:
        type: string
      postalCode:
        type: string
      recentOffers:
        items:
          $ref: '#/definitions/domain.OfferSupplierDTO'
        type: array
      stats:
        $ref: '#/definitions/domain.SupplierStatsDTO'
      status:
        $ref: '#/definitions/domain.SupplierStatus'
      updatedAt:
        type: string
      updatedById:
        type: string
      updatedByName:
        type: string
      website:
        type: string
    type: object
  domain.TimeRange:
    enum:
    - rolling12months
    - allTime
    - custom
    type: string
    x-enum-varnames:
    - TimeRangeRolling12Months
    - TimeRangeAllTime
    - TimeRangeCustom
  domain.TopCustomerDTO:
    properties:
      id:
        type: string
      name:
        type: string
      orgNumber:
        type: string
      wonOfferCount:
        description: Count of offers in order or completed phases
        type: integer
      wonOfferValue:
        description: Total value of won offers (order + completed)
        type: number
    type: object
  domain.UnreadCountDTO:
    properties:
      count:
        type: integer
    type: object
  domain.UpdateActivityRequest:
    properties:
      assignedToId:
        maxLength: 100
        type: string
      attendees:
        items:
          type: string
        type: array
      body:
        maxLength: 2000
        type: string
      dueDate:
        type: string
      durationMinutes:
        minimum: 1
        type: integer
      isPrivate:
        type: boolean
      priority:
        maximum: 5
        minimum: 0
        type: integer
      scheduledAt:
        type: string
      status:
        $ref: '#/definitions/domain.ActivityStatus'
      title:
        maxLength: 200
        type: string
    required:
    - title
    type: object
  domain.UpdateBudgetItemRequest:
    properties:
      description:
        type: string
      displayOrder:
        minimum: 0
        type: integer
      expectedCost:
        minimum: 0
        type: number
      expectedMargin:
        maximum: 100
        minimum: 0
        type: number
      name:
        maxLength: 200
        type: string
      pricePerItem:
        minimum: 0
        type: number
      quantity:
        minimum: 0
        type: number
    required:
    - name
    type: object
  domain.UpdateCompanyRequest:
    properties:
      defaultOfferResponsibleId:
        maxLength: 100
        type: string
      defaultProjectResponsibleId:
        maxLength: 100
        type: string
    type: object
  domain.UpdateContactRequest:
    properties:
      address:
        maxLength: 500
        type: string
      city:
        maxLength: 100
        type: string
      contactType:
        $ref: '#/definitions/domain.ContactType'
      country:
        maxLength: 100
        type: string
      department:
        maxLength: 100
        type: string
      email:
        maxLength: 255
        type: string
      firstName:
        maxLength: 100
        type: string
      isActive:
        type: boolean
      lastName:
        maxLength: 100
        type: string
      linkedInUrl:
        maxLength: 500
        type: string
      mobile:
        maxLength: 50
        type: string
      notes:
        type: string
      phone:
        maxLength: 50
        type: string
      postalCode:
        maxLength: 20
        type: string
      preferredContactMethod:
        maxLength: 50
        type: string
      primaryCustomerId:
        type: string
      title:
        maxLength: 100
        type: string
    required:
    - firstName
    - lastName
    type: object
  domain.UpdateCustomerAddressRequest:
    properties:
      address:
        maxLength: 500
        type: string
      city:
        maxLength: 100
        type: string
      country:
        maxLength: 100
        type: string
      postalCode:
        maxLength: 20
        type: string
    type: object
  domain.UpdateCustomerCityRequest:
    properties:
      city:
        maxLength: 100
        type: string
    type: object
  domain.UpdateCustomerClassRequest:
    properties:
      customerClass:
        maxLength: 50
        type: string
    type: object
  domain.UpdateCustomerCompanyRequest:
    properties:
      companyId:
        allOf:
        - $ref: '#/definitions/domain.CompanyID'
        description: nullable to allow unassignment
    type: object
  domain.UpdateCustomerContactInfoRequest:
    properties:
      contactEmail:
        type: string
      contactPerson:
        maxLength: 200
        type: string
      contactPhone:
        maxLength: 50
        type: string
    type: object
  domain.UpdateCustomerCreditLimitRequest:
    properties:
      creditLimit:
        description: nullable to allow clearing
        type: number
    type: object
  domain.UpdateCustomerIndustryRequest:
    properties:
      industry:
        allOf:
        - $ref: '#/definitions/domain.CustomerIndustry'
        enum:
        - construction
        - manufacturing
        - retail
        - logistics
        - agriculture
        - energy
        - public_sector
        - real_estate
        - other
    type: object
  domain.UpdateCustomerIsInternalRequest:
    properties:
      isInternal:
        type: boolean
    type: object
  domain.UpdateCustomerNotesRequest:
    properties:
      notes:
        type: string
    type: object
  domain.UpdateCustomerPostalCodeRequest:
    properties:
      postalCode:
        maxLength: 20
        type: string
    type: object
  domain.UpdateCustomerRequest:
    properties:
      address:
        maxLength: 500
        type: string
      city:
        maxLength: 100
        type: string
      contactEmail:
        type: string
      contactPerson:
        maxLength: 200
        type: string
      contactPhone:
        maxLength: 50
        type: string
      country:
        maxLength: 100
        type: string
      county:
        maxLength: 100
        type: string
      creditLimit:
        type: number
      customerClass:
        maxLength: 50
        type: string
      email:
        type: string
      industry:
        $ref: '#/definitions/domain.CustomerIndustry'
      municipality:
        maxLength: 100
        type: string
      name:
        maxLength: 200
        type: string
      notes:
        type: string
      phone:
        maxLength: 50
        type: string
      postalCode:
        maxLength: 20
        type: string
      status:
        $ref: '#/definitions/domain.CustomerStatus'
      tier:
        $ref: '#/definitions/domain.CustomerTier'
      website:
        maxLength: 500
        type: string
    type: object
  domain.UpdateCustomerStatusRequest:
    properties:
      status:
        allOf:
        - $ref: '#/definitions/domain.CustomerStatus'
        enum:
        - active
        - inactive
        - lead
        - churned
    required:
    - status
    type: object
  domain.UpdateCustomerTierRequest:
    properties:
      tier:
        allOf:
        - $ref: '#/definitions/domain.CustomerTier'
        enum:
        - bronze
        - silver
        - gold
        - platinum
    required:
    - tier
    type: object
  domain.UpdateCustomerWebsiteRequest:
    properties:
      website:
        maxLength: 500
        type: string
    type: object
  domain.UpdateDealRequest:
    properties:
      actualCloseDate:
        type: string
      currency:
        maxLength: 3
        type: string
      description:
        type: string
      expectedCloseDate:
        type: string
      lostReason:
        maxLength: 500
        type: string
      notes:
        type: string
      ownerId:
        maxLength: 100
        type: string
      probability:
        maximum: 100
        minimum: 0
        type: integer
      source:
        maxLength: 100
        type: string
      stage:
        $ref: '#/definitions/domain.DealStage'
      title:
        maxLength: 200
        type: string
      value:
        minimum: 0
        type: number
    required:
    - title
    type: object
  domain.UpdateDealStageRequest:
    properties:
      notes:
        type: string
      stage:
        $ref: '#/definitions/domain.DealStage'
    required:
    - stage
    type: object
  domain.UpdateOfferCostRequest:
    properties:
      cost:
        minimum: 0
        type: number
    required:
    - cost
    type: object
  domain.UpdateOfferCustomerHasWonProjectRequest:
    properties:
      customerHasWonProject:
        type: boolean
    type: object
  domain.UpdateOfferCustomerRequest:
    properties:
      customerId:
        type: string
    required:
    - customerId
    type: object
  domain.UpdateOfferDescriptionRequest:
    properties:
      description:
        maxLength: 10000
        type: string
    type: object
  domain.UpdateOfferDueDateRequest:
    properties:
      dueDate:
        description: nullable to allow clearing
        type: string
    type: object
  domain.UpdateOfferEndDateRequest:
    properties:
      endDate:
        description: nullable to allow clearing
        type: string
    type: object
  domain.UpdateOfferExpirationDateRequest:
    properties:
      expirationDate:
        description: nullable to allow clearing (though not recommended)
        type: string
    type: object
  domain.UpdateOfferExternalReferenceRequest:
    properties:
      externalReference:
        maxLength: 100
        type: string
    type: object
  domain.UpdateOfferHealthRequest:
    properties:
      completionPercent:
        description: Optional completion percentage (0-100)
        maximum: 100
        minimum: 0
        type: number
      health:
        allOf:
        - $ref: '#/definitions/domain.OfferHealth'
        description: Health status enum
        enum:
        - on_track
        - at_risk
        - delayed
        - over_budget
    required:
    - health
    type: object
  domain.UpdateOfferInvoicedRequest:
    properties:
      invoiced:
        description: Amount invoiced to customer
        minimum: 0
        type: number
    type: object
  domain.UpdateOfferNotesRequest:
    properties:
      notes:
        maxLength: 10000
        type: string
    type: object
  domain.UpdateOfferNumberRequest:
    properties:
      offerNumber:
        maxLength: 50
        type: string
    required:
    - offerNumber
    type: object
  domain.UpdateOfferProbabilityRequest:
    properties:
      probability:
        maximum: 100
        minimum: 0
        type: integer
    required:
    - probability
    type: object
  domain.UpdateOfferProjectRequest:
    properties:
      projectId:
        type: string
    required:
    - projectId
    type: object
  domain.UpdateOfferRequest:
    properties:
      cost:
        minimum: 0
        type: number
      description:
        type: string
      dueDate:
        type: string
      expirationDate:
        description: Optional, defaults to 60 days after sent date
        type: string
      location:
        maxLength: 200
        type: string
      notes:
        type: string
      phase:
        $ref: '#/definitions/domain.OfferPhase'
      probability:
        maximum: 100
        minimum: 0
        type: integer
      responsibleUserId:
        type: string
      sentDate:
        type: string
      status:
        $ref: '#/definitions/domain.OfferStatus'
      title:
        maxLength: 200
        type: string
    required:
    - phase
    - responsibleUserId
    - status
    - title
    type: object
  domain.UpdateOfferResponsibleRequest:
    properties:
      responsibleUserId:
        maxLength: 100
        type: string
    required:
    - responsibleUserId
    type: object
  domain.UpdateOfferSentDateRequest:
    properties:
      sentDate:
        description: nullable to allow clearing
        type: string
    type: object
  domain.UpdateOfferSpentRequest:
    properties:
      spent:
        description: Amount spent on this order
        minimum: 0
        type: number
    type: object
  domain.UpdateOfferStartDateRequest:
    properties:
      startDate:
        description: nullable to allow clearing
        type: string
    type: object
  domain.UpdateOfferSupplierContactRequest:
    properties:
      contactId:
        type: string
    type: object
  domain.UpdateOfferSupplierNotesRequest:
    properties:
      notes:
        type: string
    type: object
  domain.UpdateOfferSupplierRequest:
    properties:
      contactId:
        type: string
      notes:
        type: string
      status:
        $ref: '#/definitions/domain.OfferSupplierStatus'
    type: object
  domain.UpdateOfferSupplierStatusRequest:
    properties:
      status:
        allOf:
        - $ref: '#/definitions/domain.OfferSupplierStatus'
        enum:
        - active
        - done
    required:
    - status
    type: object
  domain.UpdateOfferTitleRequest:
    properties:
      title:
        maxLength: 200
        type: string
    required:
    - title
    type: object
  domain.UpdateOfferValueRequest:
    properties:
      value:
        minimum: 0
        type: number
    required:
    - value
    type: object
  domain.UpdateProjectDatesRequest:
    properties:
      endDate:
        type: string
      startDate:
        type: string
    type: object
  domain.UpdateProjectDescriptionRequest:
    properties:
      description:
        type: string
      summary:
        maxLength: 500
        type: string
    type: object
  domain.UpdateProjectNameRequest:
    properties:
      name:
        maxLength: 200
        minLength: 1
        type: string
    required:
    - name
    type: object
  domain.UpdateProjectNumberRequest:
    properties:
      projectNumber:
        maxLength: 50
        type: string
    type: object
  domain.UpdateProjectPhaseRequest:
    properties:
      phase:
        allOf:
        - $ref: '#/definitions/domain.ProjectPhase'
        enum:
        - tilbud
        - working
        - on_hold
        - completed
        - cancelled
    required:
    - phase
    type: object
  domain.UpdateProjectRequest:
    properties:
      customerId:
        description: Optional - can update customer assignment
        type: string
      dealId:
        type: string
      description:
        type: string
      endDate:
        type: string
      externalReference:
        maxLength: 100
        type: string
      location:
        maxLength: 200
        type: string
      name:
        maxLength: 200
        type: string
      phase:
        allOf:
        - $ref: '#/definitions/domain.ProjectPhase'
        enum:
        - tilbud
        - working
        - on_hold
        - completed
        - cancelled
      projectNumber:
        maxLength: 50
        type: string
      startDate:
        type: string
      summary:
        type: string
    required:
    - name
    type: object
  domain.UpdateSupplierAddressRequest:
    properties:
      address:
        maxLength: 500
        type: string
    type: object
  domain.UpdateSupplierCategoryRequest:
    properties:
      category:
        maxLength: 200
        type: string
    type: object
  domain.UpdateSupplierCityRequest:
    properties:
      city:
        maxLength: 100
        type: string
    type: object
  domain.UpdateSupplierContactRequest:
    properties:
      email:
        type: string
      firstName:
        maxLength: 100
        type: string
      isPrimary:
        type: boolean
      lastName:
        maxLength: 100
        type: string
      notes:
        type: string
      phone:
        maxLength: 50
        type: string
      title:
        maxLength: 200
        type: string
    required:
    - firstName
    - lastName
    type: object
  domain.UpdateSupplierEmailRequest:
    properties:
      email:
        type: string
    type: object
  domain.UpdateSupplierNotesRequest:
    properties:
      notes:
        type: string
    type: object
  domain.UpdateSupplierPaymentTermsRequest:
    properties:
      paymentTerms:
        maxLength: 200
        type: string
    type: object
  domain.UpdateSupplierPhoneRequest:
    properties:
      phone:
        maxLength: 50
        type: string
    type: object
  domain.UpdateSupplierPostalCodeRequest:
    properties:
      postalCode:
        maxLength: 20
        type: string
    type: object
  domain.UpdateSupplierRequest:
    properties:
      address:
        maxLength: 500
        type: string
      category:
        maxLength: 200
        type: string
      city:
        maxLength: 100
        type: string
      contactEmail:
        type: string
      contactPerson:
        maxLength: 200
        type: string
      contactPhone:
        maxLength: 50
        type: string
      country:
        maxLength: 100
        type: string
      county:
        maxLength: 100
        type: string
      email:
        type: string
      municipality:
        maxLength: 100
        type: string
      name:
        maxLength: 200
        type: string
      notes:
        type: string
      paymentTerms:
        maxLength: 200
        type: string
      phone:
        maxLength: 50
        type: string
      postalCode:
        maxLength: 20
        type: string
      status:
        $ref: '#/definitions/domain.SupplierStatus'
      website:
        maxLength: 500
        type: string
    type: object
  domain.UpdateSupplierStatusRequest:
    properties:
      status:
        allOf:
        - $ref: '#/definitions/domain.SupplierStatus'
        enum:
        - active
        - inactive
        - pending
        - blacklisted
    required:
    - status
    type: object
  domain.UpdateSupplierWebsiteRequest:
    properties:
      website:
        maxLength: 500
        type: string
    type: object
  domain.UserDTO:
    properties:
      avatar:
        type: string
      department:
        type: string
      email:
        type: string
      id:
        type: string
      name:
        type: string
      roles:
        items:
          type: string
        type: array
    type: object
  domain.WinOfferRequest:
    properties:
      notes:
        description: Notes is an optional note about why this offer was selected
        maxLength: 500
        type: string
    type: object
  domain.WinOfferResponse:
    properties:
      expiredCount:
        description: Count of sibling offers that were expired
        type: integer
      expiredOffers:
        description: Sibling offers that were expired
        items:
          $ref: '#/definitions/domain.OfferDTO'
        type: array
      offer:
        $ref: '#/definitions/domain.OfferDTO'
      project:
        $ref: '#/definitions/domain.ProjectDTO'
    type: object
  domain.WinRateAnalysisDTO:
    properties:
      avgDaysToClose:
        type: number
      avgLostDealValue:
        type: number
      avgWonDealValue:
        type: number
      lostValue:
        type: number
      totalClosed:
        type: integer
      totalLost:
        type: integer
      totalWon:
        type: integer
      winRate:
        type: number
      wonValue:
        type: number
    type: object
  domain.WinRateMetrics:
    properties:
      economicWinRate:
        description: won_value / (won_value + lost_value), 0-1 scale
        type: number
      lostCount:
        type: integer
      lostValue:
        type: number
      winRate:
        description: won_count / (won_count + lost_count), 0-1 scale
        type: number
      wonCount:
        type: integer
      wonValue:
        type: number
    type: object
  handler.AuditLogDTO:
    properties:
      action:
        type: string
      changes:
        additionalProperties: true
        type: object
      companyId:
        type: string
      entityId:
        type: string
      entityName:
        type: string
      entityType:
        type: string
      id:
        type: string
      ipAddress:
        type: string
      metadata:
        additionalProperties: true
        type: object
      newValues:
        additionalProperties: true
        type: object
      oldValues:
        additionalProperties: true
        type: object
      performedAt:
        type: string
      requestId:
        type: string
      userAgent:
        type: string
      userEmail:
        type: string
      userId:
        type: string
      userName:
        type: string
    type: object
  handler.AuditLogListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/handler.AuditLogDTO'
        type: array
      page:
        type: integer
      pageSize:
        type: integer
      total:
        type: integer
      totalPages:
        type: integer
    type: object
  handler.AuditStatsResponse:
    properties:
      actionCounts:
        additionalProperties:
          format: int64
          type: integer
        type: object
      endTime:
        type: string
      startTime:
        type: string
    type: object
  handler.DealWithHistoryResponse:
    properties:
      deal:
        $ref: '#/definitions/domain.DealDTO'
      stageHistory:
        items:
          $ref: '#/definitions/domain.DealStageHistoryDTO'
        type: array
    type: object
  handler.WinDealResponse:
    properties:
      deal:
        $ref: '#/definitions/domain.DealDTO'
      project:
        $ref: '#/definitions/domain.ProjectDTO'
    type: object
  repository.ForecastPeriod:
    properties:
      dealCount:
        format: int64
        type: integer
      periodEnd:
        type: string
      periodStart:
        type: string
      totalValue:
        format: float64
        type: number
      weightedValue:
        format: float64
        type: number
    type: object
  repository.PipelineStats:
    properties:
      byStage:
        additionalProperties:
          $ref: '#/definitions/repository.StageStats'
        type: object
      totalCount:
        format: int64
        type: integer
      totalValue:
        format: float64
        type: number
      weightedValue:
        format: float64
        type: number
    type: object
  repository.StageStats:
    properties:
      count:
        format: int64
        type: integer
      totalValue:
        format: float64
        type: number
      weightedValue:
        format: float64
        type: number
    type: object
host: localhost:8080
info:
  contact:
    email: support@straye.io
    name: API Support
  description: CRM Relation API for customer, project, and sales pipeline management
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: Straye Relation API
  version: "1.0"
paths:
  /{entityType}/{id}/contacts:
    get:
      description: Get all contacts related to a specific entity (customer, deal,
        or project)
      parameters:
      - description: Entity type
        enum:
        - customers
        - deals
        - projects
        in: path
        name: entityType
        required: true
        type: string
      - description: Entity ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.ContactDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get contacts for entity
      tags:
      - Contacts
  /activities:
    get:
      consumes:
      - application/json
      description: Get paginated list of activities with optional filters
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page (max 200)
        in: query
        name: pageSize
        type: integer
      - description: Filter by activity type (meeting, task, call, email, note)
        in: query
        name: type
        type: string
      - description: Filter by status (planned, in_progress, completed, cancelled)
        in: query
        name: status
        type: string
      - description: Filter by target type (customer, project, offer, deal)
        in: query
        name: targetType
        type: string
      - description: Filter by target entity ID
        format: uuid
        in: query
        name: targetId
        type: string
      - description: Filter by assigned user ID
        in: query
        name: assignedTo
        type: string
      - description: Filter activities from this date (YYYY-MM-DD), inclusive from
          00:00:00
        in: query
        name: from
        type: string
      - description: Filter activities to this date (YYYY-MM-DD), inclusive until
          23:59:59
        in: query
        name: to
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.ActivityDTO'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List activities
      tags:
      - Activities
    post:
      consumes:
      - application/json
      description: Create a new activity (meeting, task, call, email, or note)
      parameters:
      - description: Activity data
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/domain.CreateActivityRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.ActivityDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create activity
      tags:
      - Activities
  /activities/{id}:
    delete:
      consumes:
      - application/json
      description: Delete an activity
      parameters:
      - description: Activity ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete activity
      tags:
      - Activities
    get:
      consumes:
      - application/json
      description: Get a single activity by its ID
      parameters:
      - description: Activity ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ActivityDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get activity by ID
      tags:
      - Activities
    put:
      consumes:
      - application/json
      description: Update an existing activity
      parameters:
      - description: Activity ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Activity data
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateActivityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ActivityDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update activity
      tags:
      - Activities
  /activities/{id}/attendees:
    post:
      consumes:
      - application/json
      description: Add a user as an attendee to a meeting activity
      parameters:
      - description: Activity ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Attendee user ID
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/domain.AddAttendeeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ActivityDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Add attendee to meeting
      tags:
      - Activities
  /activities/{id}/attendees/{userId}:
    delete:
      consumes:
      - application/json
      description: Remove a user from the attendees list of a meeting activity
      parameters:
      - description: Activity ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: User ID to remove
        in: path
        name: userId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ActivityDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Remove attendee from meeting
      tags:
      - Activities
  /activities/{id}/complete:
    post:
      consumes:
      - application/json
      description: Mark an activity as completed with an optional outcome
      parameters:
      - description: Activity ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Optional outcome
        in: body
        name: body
        schema:
          $ref: '#/definitions/domain.CompleteActivityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ActivityDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Complete activity
      tags:
      - Activities
  /activities/{id}/follow-up:
    post:
      consumes:
      - application/json
      description: Create a follow-up task from a completed activity
      parameters:
      - description: Activity ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Follow-up task data
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/domain.CreateFollowUpRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.ActivityDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create follow-up task
      tags:
      - Activities
  /activities/my-tasks:
    get:
      consumes:
      - application/json
      description: Get current user's incomplete tasks (assigned tasks that are not
        completed or cancelled)
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page (max 200)
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.ActivityDTO'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get my tasks
      tags:
      - Activities
  /activities/stats:
    get:
      consumes:
      - application/json
      description: Get activity status counts for the current user's dashboard
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ActivityStatusCounts'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get activity statistics
      tags:
      - Activities
  /activities/upcoming:
    get:
      consumes:
      - application/json
      description: Get upcoming scheduled activities for the current user within a
        specified number of days
      parameters:
      - default: 7
        description: Number of days to look ahead (1-90)
        in: query
        name: daysAhead
        type: integer
      - default: 20
        description: Maximum number of activities to return (1-100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.ActivityDTO'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get upcoming activities
      tags:
      - Activities
  /audit:
    get:
      description: Returns a paginated list of audit log entries with optional filters
      parameters:
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Page size (default: 20, max: 100)'
        in: query
        name: pageSize
        type: integer
      - description: Filter by user ID
        in: query
        name: userId
        type: string
      - description: Filter by action type
        in: query
        name: action
        type: string
      - description: Filter by entity type
        in: query
        name: entityType
        type: string
      - description: Filter by entity ID
        in: query
        name: entityId
        type: string
      - description: Filter by start time (RFC3339)
        in: query
        name: startTime
        type: string
      - description: Filter by end time (RFC3339)
        in: query
        name: endTime
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.AuditLogListResponse'
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List audit logs
      tags:
      - Audit
  /audit/{id}:
    get:
      description: Returns a specific audit log entry
      parameters:
      - description: Audit log ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.AuditLogDTO'
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get audit log by ID
      tags:
      - Audit
  /audit/entity/{entityType}/{entityId}:
    get:
      description: Returns audit logs for a specific entity
      parameters:
      - description: Entity type (e.g., Customer, Project)
        in: path
        name: entityType
        required: true
        type: string
      - description: Entity ID
        in: path
        name: entityId
        required: true
        type: string
      - description: 'Maximum number of entries (default: 50)'
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/handler.AuditLogDTO'
            type: array
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get audit logs for an entity
      tags:
      - Audit
  /audit/export:
    get:
      description: Exports audit logs for a time range as JSON
      parameters:
      - description: Start time (RFC3339)
        in: query
        name: startTime
        required: true
        type: string
      - description: End time (RFC3339)
        in: query
        name: endTime
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.AuditLog'
            type: array
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Export audit logs
      tags:
      - Audit
  /audit/stats:
    get:
      description: Returns statistics about audit log actions for a time range
      parameters:
      - description: Start time (RFC3339)
        in: query
        name: startTime
        required: true
        type: string
      - description: End time (RFC3339)
        in: query
        name: endTime
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.AuditStatsResponse'
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get audit log statistics
      tags:
      - Audit
  /auth/me:
    get:
      description: Returns the current authenticated user with roles, company, and
        permissions info
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.AuthUserDTO'
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get current authenticated user
      tags:
      - Auth
  /auth/permissions:
    get:
      description: Returns the full list of permissions for the current authenticated
        user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.PermissionsResponseDTO'
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get current user's permissions
      tags:
      - Auth
  /companies:
    get:
      description: Returns a list of all active Straye group companies
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Company'
            type: array
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get all companies
      tags:
      - Companies
  /companies/{id}:
    get:
      description: Returns detailed information about a specific company including
        default responsible user settings
      parameters:
      - description: Company ID (e.g., gruppen, stalbygg, hybridbygg, industri, tak,
          montasje)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CompanyDetailDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get company by ID
      tags:
      - Companies
    put:
      consumes:
      - application/json
      description: Updates company settings including default responsible users for
        offers and projects
      parameters:
      - description: Company ID (e.g., gruppen, stalbygg, hybridbygg, industri, tak,
          montasje)
        in: path
        name: id
        required: true
        type: string
      - description: Company update request
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCompanyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CompanyDetailDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update company settings
      tags:
      - Companies
  /contacts:
    get:
      consumes:
      - application/json
      description: Get paginated list of contacts with optional filters
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page
        in: query
        name: pageSize
        type: integer
      - description: Search by name or email
        in: query
        name: search
        type: string
      - description: Filter by job title
        in: query
        name: title
        type: string
      - description: Filter by contact type
        enum:
        - primary
        - secondary
        - billing
        - technical
        - executive
        - other
        in: query
        name: contactType
        type: string
      - description: Filter by related entity type
        enum:
        - customer
        - deal
        - project
        in: query
        name: entityType
        type: string
      - description: Filter by related entity ID
        in: query
        name: entityId
        type: string
      - description: Sort option
        enum:
        - name_asc
        - name_desc
        - email_asc
        - created_desc
        in: query
        name: sortBy
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.PaginatedResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List contacts
      tags:
      - Contacts
    post:
      consumes:
      - application/json
      description: Create a new contact
      parameters:
      - description: Contact data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CreateContactRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.ContactDTO'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create contact
      tags:
      - Contacts
  /contacts/{id}:
    delete:
      description: Delete a contact
      parameters:
      - description: Contact ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete contact
      tags:
      - Contacts
    get:
      description: Get a contact by ID with all relationships
      parameters:
      - description: Contact ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ContactDTO'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get contact
      tags:
      - Contacts
    put:
      consumes:
      - application/json
      description: Update an existing contact
      parameters:
      - description: Contact ID
        in: path
        name: id
        required: true
        type: string
      - description: Contact data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateContactRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ContactDTO'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update contact
      tags:
      - Contacts
  /contacts/{id}/relationships:
    post:
      consumes:
      - application/json
      description: Add a relationship between a contact and an entity (customer, deal,
        or project)
      parameters:
      - description: Contact ID
        in: path
        name: id
        required: true
        type: string
      - description: Relationship data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.AddContactRelationshipRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.ContactRelationshipDTO'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "409":
          description: Conflict
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Add relationship
      tags:
      - Contacts
  /contacts/{id}/relationships/{relationshipId}:
    delete:
      description: Remove a relationship between a contact and an entity
      parameters:
      - description: Contact ID
        in: path
        name: id
        required: true
        type: string
      - description: Relationship ID
        in: path
        name: relationshipId
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Remove relationship
      tags:
      - Contacts
  /customers:
    get:
      consumes:
      - application/json
      description: Get paginated list of customers with optional filters
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page (max 200)
        in: query
        name: pageSize
        type: integer
      - description: Search by name or organization number
        in: query
        name: search
        type: string
      - description: Filter by city
        in: query
        name: city
        type: string
      - description: Filter by country
        in: query
        name: country
        type: string
      - description: Filter by status
        enum:
        - active
        - inactive
        - lead
        - churned
        in: query
        name: status
        type: string
      - description: Filter by tier
        enum:
        - bronze
        - silver
        - gold
        - platinum
        in: query
        name: tier
        type: string
      - description: Filter by industry
        enum:
        - construction
        - manufacturing
        - retail
        - logistics
        - agriculture
        - energy
        - public_sector
        - real_estate
        - other
        in: query
        name: industry
        type: string
      - description: Sort field
        enum:
        - createdAt
        - updatedAt
        - name
        - city
        - country
        - status
        - tier
        - industry
        - orgNumber
        in: query
        name: sortBy
        type: string
      - default: desc
        description: Sort order
        enum:
        - asc
        - desc
        in: query
        name: sortOrder
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.CustomerDTO'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List customers
      tags:
      - Customers
    post:
      consumes:
      - application/json
      description: Create a new customer
      parameters:
      - description: Customer data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CreateCustomerRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Duplicate organization number
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create customer
      tags:
      - Customers
  /customers/{id}:
    delete:
      consumes:
      - application/json
      description: Soft delete a customer. The customer is hidden from lists but preserved
        for historical reference. Related projects and offers keep their customer
        reference.
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete customer
      tags:
      - Customers
    get:
      consumes:
      - application/json
      description: Get a customer with full details including stats, contacts, active
        deals, and projects
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerWithDetailsDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get customer by ID
      tags:
      - Customers
    put:
      consumes:
      - application/json
      description: Update an existing customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Customer data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Duplicate organization number
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer
      tags:
      - Customers
  /customers/{id}/address:
    put:
      consumes:
      - application/json
      description: Update the address fields of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Address data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerAddressRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer address
      tags:
      - Customers
  /customers/{id}/city:
    put:
      consumes:
      - application/json
      description: Update only the city of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: City data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerCityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer city
      tags:
      - Customers
  /customers/{id}/company:
    put:
      consumes:
      - application/json
      description: Assign or unassign a customer to/from a company
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Company data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerCompanyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer company assignment
      tags:
      - Customers
  /customers/{id}/contact-info:
    put:
      consumes:
      - application/json
      description: Update the contact person, email, and phone of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Contact info data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerContactInfoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer contact information
      tags:
      - Customers
  /customers/{id}/contacts:
    get:
      consumes:
      - application/json
      description: Get all contacts associated with a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.ContactDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List customer contacts
      tags:
      - Customers
    post:
      consumes:
      - application/json
      description: Create a new contact and associate it with the specified customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Contact data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CreateContactRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.ContactDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create contact for customer
      tags:
      - Customers
  /customers/{id}/credit-limit:
    put:
      consumes:
      - application/json
      description: Update only the credit limit of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Credit limit data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerCreditLimitRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer credit limit
      tags:
      - Customers
  /customers/{id}/customer-class:
    put:
      consumes:
      - application/json
      description: Update only the customer class
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Customer class data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerClassRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer class
      tags:
      - Customers
  /customers/{id}/files:
    get:
      description: Get all files attached to a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.FileDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List customer files
      tags:
      - Files
    post:
      consumes:
      - multipart/form-data
      description: Upload a file and attach it to a customer. Company is determined
        from the X-Company-Id header.
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: File to upload
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.FileDTO'
        "400":
          description: Missing company context or invalid request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "413":
          description: Request Entity Too Large
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Upload file to customer
      tags:
      - Files
  /customers/{id}/industry:
    put:
      consumes:
      - application/json
      description: Update only the industry of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Industry data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerIndustryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer industry
      tags:
      - Customers
  /customers/{id}/is-internal:
    put:
      consumes:
      - application/json
      description: Update the internal flag of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Internal flag data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerIsInternalRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer internal flag
      tags:
      - Customers
  /customers/{id}/notes:
    put:
      consumes:
      - application/json
      description: Update only the notes of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Notes data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerNotesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer notes
      tags:
      - Customers
  /customers/{id}/offers:
    get:
      consumes:
      - application/json
      description: Get paginated list of offers associated with a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page (max 200)
        in: query
        name: pageSize
        type: integer
      - description: Filter by phase
        enum:
        - draft
        - in_progress
        - sent
        - won
        - lost
        - expired
        in: query
        name: phase
        type: string
      - description: Sort field
        enum:
        - createdAt
        - updatedAt
        - title
        - value
        - probability
        - phase
        - status
        - dueDate
        - customerName
        in: query
        name: sortBy
        type: string
      - default: desc
        description: Sort order
        enum:
        - asc
        - desc
        in: query
        name: sortOrder
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.OfferDTO'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List offers for a customer
      tags:
      - Customers
  /customers/{id}/postal-code:
    put:
      consumes:
      - application/json
      description: Update only the postal code of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Postal code data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerPostalCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer postal code
      tags:
      - Customers
  /customers/{id}/projects:
    get:
      consumes:
      - application/json
      description: Get paginated list of projects associated with a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page (max 200)
        in: query
        name: pageSize
        type: integer
      - description: Filter by phase
        enum:
        - tilbud
        - active
        - working
        - completed
        - cancelled
        in: query
        name: phase
        type: string
      - description: Sort field
        enum:
        - createdAt
        - updatedAt
        - name
        - phase
        - health
        - budget
        - spent
        - startDate
        - endDate
        - customerName
        - wonAt
        in: query
        name: sortBy
        type: string
      - default: desc
        description: Sort order
        enum:
        - asc
        - desc
        in: query
        name: sortOrder
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.ProjectDTO'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List projects for a customer
      tags:
      - Customers
  /customers/{id}/status:
    put:
      consumes:
      - application/json
      description: Update only the status of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Status data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer status
      tags:
      - Customers
  /customers/{id}/tier:
    put:
      consumes:
      - application/json
      description: Update only the tier of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Tier data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerTierRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer tier
      tags:
      - Customers
  /customers/{id}/website:
    put:
      consumes:
      - application/json
      description: Update only the website URL of a customer
      parameters:
      - description: Customer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Website data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateCustomerWebsiteRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer website
      tags:
      - Customers
  /customers/erp-differences:
    get:
      consumes:
      - application/json
      description: Compare customers in the ERP data warehouse with customers in our
        database. Returns customers that exist in ERP but not in our local database,
        and customers that exist locally but not in ERP. For organizations, matching
        is done by organization number. For private persons (no org number), matching
        is done by name.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.CustomerERPDifferencesResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get differences between ERP and local customers
      tags:
      - Customers
  /customers/search:
    get:
      consumes:
      - application/json
      description: Find the single best matching customer for a query using fuzzy
        matching (handles typos, abbreviations, partial matches). Use q=all to get
        all customers. Returns minimal customer data (id and name only). Also supports
        email domain matching (e.g., 'hauk@straye.no' matches 'Straye').
      parameters:
      - description: Search query (e.g., 'AF', 'NTN', 'Veidikke', 'all' for all customers,
          or email like 'user@company.no')
        in: query
        name: q
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.FuzzyCustomerSearchResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      summary: Fuzzy search for best matching customer
      tags:
      - Customers
  /dashboard/metrics:
    get:
      description: |-
        Returns dashboard metrics with configurable time range. All metrics exclude draft and expired offers.

        **IMPORTANT: Aggregation Logic (Avoids Double-Counting)**
        When a project has multiple offers, only the highest value offer per phase is counted.
        Orphan offers (without project) are included at full value.
        Example: Project A has offers 23M and 25M in "sent" phase - totalValue shows 25M, not 48M.

        **Time Range Options:**
        - `rolling12months` (default): Uses a rolling 12-month window from the current date
        - `allTime`: Calculates metrics without any date filter
        - Custom range: Use `fromDate` and `toDate` parameters (YYYY-MM-DD format)

        **Custom Date Range:**
        When `fromDate` and/or `toDate` are provided, they override the `timeRange` parameter.
        - `fromDate`: Start of range at 00:00:00 local time
        - `toDate`: End of range at 23:59:59 local time
        - Both parameters are optional; can be used together or individually

        **Offer Metrics (Pipeline Phase):**
        - `totalOfferCount`: Count of offers excluding drafts and expired
        - `totalProjectCount`: Count of unique projects with offers (excludes orphan offers)
        - `offerReserve`: Total value of active offers - best per project (avoids double-counting)
        - `weightedOfferReserve`: Sum of (value * probability/100) for active offers
        - `averageProbability`: Average probability of active offers

        **Pipeline Data:**
        - Returns phases: in_progress, sent, order, completed, lost with counts and values
        - `count`: Total offer count in phase
        - `projectCount`: Unique projects in phase (excludes orphan offers)
        - `totalValue`: Sum of best offer value per project (avoids double-counting)
        - Excludes draft and expired offers

        **Win Rate Metrics:**
        - `winRate`: won_count / (won_count + lost_count) - returns 0-1 scale (e.g., 0.5 = 50%)
        - `economicWinRate`: won_value / (won_value + lost_value) - value-based win rate
        - Also includes `wonCount`, `lostCount`, `wonValue`, `lostValue` for transparency

        **Order Metrics (Execution Phase - from offers):**
        - `activeOrderCount`: Count of offers in order phase (active execution)
        - `completedOrderCount`: Count of offers in completed phase
        - `orderValue`: Total value of offers in order phase
        - `orderReserve`: Sum of (value - invoiced) for order phase offers
        - `totalInvoiced`: Sum of invoiced for order phase offers
        - `totalSpent`: Sum of spent for order phase offers
        - `averageOrderProgress`: Average completion percentage for order phase offers
        - `healthDistribution`: Count of order phase offers by health status (onTrack, atRisk, delayed, overBudget)

        **Financial Summary:**
        - `totalValue`: orderReserve + totalInvoiced

        **Recent Lists (limit 5 each):**
        - `recentOffers`: Offers in in_progress phase (Siste tilbud), sorted by update recency
        - `recentOrders`: Offers in order phase (Siste ordre), sorted by update recency

        **Top Customers:** Ranked by won offer count (order + completed phases) with total won value
      parameters:
      - default: rolling12months
        description: Time range for metrics (ignored if fromDate/toDate provided)
        enum:
        - rolling12months
        - allTime
        in: query
        name: timeRange
        type: string
      - description: Start date for custom range (YYYY-MM-DD format, 00:00:00)
        in: query
        name: fromDate
        type: string
      - description: End date for custom range (YYYY-MM-DD format, 23:59:59)
        in: query
        name: toDate
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.DashboardMetrics'
        "400":
          description: Invalid timeRange value or date format
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get dashboard metrics
      tags:
      - Dashboard
  /deals:
    get:
      description: List deals with optional filters
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Page size
        in: query
        name: pageSize
        type: integer
      - description: Filter by stage (lead, qualified, proposal, negotiation, won,
          lost)
        in: query
        name: stage
        type: string
      - description: Filter by owner ID
        in: query
        name: ownerId
        type: string
      - description: Filter by customer ID
        in: query
        name: customerId
        type: string
      - description: Filter by company ID
        in: query
        name: companyId
        type: string
      - description: Filter by source
        in: query
        name: source
        type: string
      - description: Minimum value
        in: query
        name: minValue
        type: number
      - description: Maximum value
        in: query
        name: maxValue
        type: number
      - description: Created after date (YYYY-MM-DD)
        in: query
        name: createdAfter
        type: string
      - description: Created before date (YYYY-MM-DD)
        in: query
        name: createdBefore
        type: string
      - description: Expected close after date (YYYY-MM-DD)
        in: query
        name: closeAfter
        type: string
      - description: Expected close before date (YYYY-MM-DD)
        in: query
        name: closeBefore
        type: string
      - description: Sort by (created_desc, created_asc, value_desc, value_asc, probability_desc,
          probability_asc, close_date_desc, close_date_asc, weighted_desc, weighted_asc)
        in: query
        name: sort
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.PaginatedResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List deals
      tags:
      - Deals
    post:
      consumes:
      - application/json
      description: Create a new deal in the sales pipeline
      parameters:
      - description: Deal data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CreateDealRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.DealDTO'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create deal
      tags:
      - Deals
  /deals/{id}:
    delete:
      description: Delete a deal
      parameters:
      - description: Deal ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete deal
      tags:
      - Deals
    get:
      description: Get a deal by ID with full details including stage history
      parameters:
      - description: Deal ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.DealWithHistoryResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get deal
      tags:
      - Deals
    put:
      consumes:
      - application/json
      description: Update an existing deal
      parameters:
      - description: Deal ID
        in: path
        name: id
        required: true
        type: string
      - description: Deal data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateDealRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.DealDTO'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update deal
      tags:
      - Deals
  /deals/{id}/activities:
    get:
      description: Get activities for a deal
      parameters:
      - description: Deal ID
        in: path
        name: id
        required: true
        type: string
      - default: 50
        description: Limit results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.ActivityDTO'
            type: array
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get deal activities
      tags:
      - Deals
  /deals/{id}/advance:
    post:
      consumes:
      - application/json
      description: Advance a deal to the next stage in the pipeline
      parameters:
      - description: Deal ID
        in: path
        name: id
        required: true
        type: string
      - description: Stage data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateDealStageRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.DealDTO'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Advance deal stage
      tags:
      - Deals
  /deals/{id}/create-offer:
    post:
      consumes:
      - application/json
      description: Create an offer linked to a deal, advancing the deal to proposal
        stage
      parameters:
      - description: Deal ID
        in: path
        name: id
        required: true
        type: string
      - description: 'Optional: template offer ID and title'
        in: body
        name: request
        schema:
          $ref: '#/definitions/domain.CreateOfferFromDealRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.CreateOfferFromDealResponse'
        "400":
          description: Invalid request or deal already has offer or invalid stage
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Deal not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create offer from deal
      tags:
      - Deals
  /deals/{id}/history:
    get:
      description: Get the stage history for a deal
      parameters:
      - description: Deal ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.DealStageHistoryDTO'
            type: array
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get deal stage history
      tags:
      - Deals
  /deals/{id}/lose:
    post:
      consumes:
      - application/json
      description: Mark a deal as lost with a categorized reason and detailed notes
      parameters:
      - description: Deal ID
        in: path
        name: id
        required: true
        type: string
      - description: Loss reason category and notes
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.LoseDealRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.DealDTO'
        "400":
          description: 'Invalid request - reason must be one of: price, timing, competitor,
            requirements, other. Notes must be 10-500 characters.'
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Lose deal
      tags:
      - Deals
  /deals/{id}/reopen:
    post:
      description: Reopen a lost deal as a new lead
      parameters:
      - description: Deal ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.DealDTO'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Reopen deal
      tags:
      - Deals
  /deals/{id}/win:
    post:
      consumes:
      - application/json
      description: Mark a deal as won and optionally create a project
      parameters:
      - description: Deal ID
        in: path
        name: id
        required: true
        type: string
      - default: true
        description: Create a project from the deal
        in: query
        name: createProject
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.WinDealResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Win deal
      tags:
      - Deals
  /deals/analytics:
    get:
      description: Get comprehensive sales pipeline analytics including stage summary,
        forecasts, conversion rates, and win rate analysis
      parameters:
      - description: Filter by company ID
        in: query
        name: companyId
        type: string
      - description: Filter by owner ID
        in: query
        name: ownerId
        type: string
      - description: Filter by date from (YYYY-MM-DD)
        in: query
        name: dateFrom
        type: string
      - description: Filter by date to (YYYY-MM-DD)
        in: query
        name: dateTo
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.PipelineAnalyticsDTO'
        "400":
          description: Invalid date range - dateFrom must be before dateTo
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get pipeline analytics
      tags:
      - Deals
  /deals/forecast:
    get:
      description: Get forecast data for upcoming months
      parameters:
      - default: 3
        description: Number of months to forecast
        in: query
        name: months
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/repository.ForecastPeriod'
            type: array
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get pipeline forecast
      tags:
      - Deals
  /deals/pipeline:
    get:
      description: Get all deals grouped by stage for pipeline view
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              items:
                $ref: '#/definitions/domain.DealDTO'
              type: array
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get pipeline overview
      tags:
      - Deals
  /deals/stats:
    get:
      description: Get aggregated statistics for the sales pipeline
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/repository.PipelineStats'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get pipeline statistics
      tags:
      - Deals
  /files/{id}:
    delete:
      description: Delete a file from both storage and database
      parameters:
      - description: File ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete file
      tags:
      - Files
    get:
      description: Get file metadata by ID
      parameters:
      - description: File ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.FileDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get file metadata
      tags:
      - Files
  /files/{id}/download:
    get:
      description: Download file content by ID
      parameters:
      - description: File ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/octet-stream
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Download file
      tags:
      - Files
  /inquiries:
    get:
      description: Returns a paginated list of inquiries (offers in draft phase)
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Page size
        in: query
        name: pageSize
        type: integer
      - description: Filter by customer ID
        in: query
        name: customerId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.PaginatedResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List inquiries
      tags:
      - Inquiries
    post:
      consumes:
      - application/json
      description: Creates a new inquiry (offer in draft phase with minimal required
        fields)
      parameters:
      - description: Inquiry data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CreateInquiryRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Customer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create inquiry
      tags:
      - Inquiries
  /inquiries/{id}:
    delete:
      description: Deletes an inquiry by ID
      parameters:
      - description: Inquiry ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid ID or not an inquiry
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Inquiry not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete inquiry
      tags:
      - Inquiries
    get:
      description: Returns a specific inquiry by ID
      parameters:
      - description: Inquiry ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Inquiry not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get inquiry
      tags:
      - Inquiries
  /inquiries/{id}/convert:
    post:
      consumes:
      - application/json
      description: Converts an inquiry to an offer (phase=in_progress), generating
        an offer number
      parameters:
      - description: Inquiry ID
        in: path
        name: id
        required: true
        type: string
      - description: Conversion options
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.ConvertInquiryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ConvertInquiryResponse'
        "400":
          description: Invalid ID, not an inquiry, or missing conversion data
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Inquiry not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Convert inquiry to offer
      tags:
      - Inquiries
  /notifications:
    get:
      consumes:
      - application/json
      description: Get paginated list of notifications for the current user
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page (max 200)
        in: query
        name: pageSize
        type: integer
      - default: false
        description: Filter to show only unread notifications
        in: query
        name: unreadOnly
        type: boolean
      - description: Filter by notification type
        enum:
        - task_assigned
        - budget_alert
        - deal_stage_changed
        - offer_accepted
        - offer_rejected
        - activity_reminder
        - project_update
        in: query
        name: type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.NotificationDTO'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List notifications
      tags:
      - Notifications
  /notifications/{id}:
    get:
      consumes:
      - application/json
      description: Get a single notification by its ID
      parameters:
      - description: Notification ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.NotificationDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get notification by ID
      tags:
      - Notifications
  /notifications/{id}/read:
    put:
      consumes:
      - application/json
      description: Mark a single notification as read
      parameters:
      - description: Notification ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Mark notification as read
      tags:
      - Notifications
  /notifications/count:
    get:
      consumes:
      - application/json
      description: Get the count of unread notifications for the current user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.UnreadCountDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get unread notification count
      tags:
      - Notifications
  /notifications/read-all:
    put:
      consumes:
      - application/json
      description: Mark all notifications for the current user as read
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Mark all notifications as read
      tags:
      - Notifications
  /offers:
    get:
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Page size
        in: query
        name: pageSize
        type: integer
      - description: Filter by customer ID
        in: query
        name: customerId
        type: string
      - description: Filter by project ID
        in: query
        name: projectId
        type: string
      - description: Filter by phase
        in: query
        name: phase
        type: string
      - description: Sort field
        enum:
        - createdAt
        - updatedAt
        - title
        - value
        - probability
        - phase
        - status
        - dueDate
        - customerName
        in: query
        name: sortBy
        type: string
      - default: desc
        description: Sort order
        enum:
        - asc
        - desc
        in: query
        name: sortOrder
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.PaginatedResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List offers
      tags:
      - Offers
    post:
      consumes:
      - application/json
      description: |-
        Creates a new offer. Defaults to in_progress phase (use /inquiries for draft phase).
        Supports three scenarios for customer/project association:
        - customerId only: Creates offer with that customer, auto-creates project
        - projectId only: Inherits customer from the existing project
        - Both: Uses provided customer, links to specified project
      parameters:
      - description: Offer data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CreateOfferRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Validation error (missing customerId/projectId, project has
            no customer, etc.)
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Customer or project not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create offer
      tags:
      - Offers
  /offers/{id}:
    delete:
      description: Delete an offer by ID. Only offers in draft or in_progress phase
        can be deleted.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid offer ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete offer
      tags:
      - Offers
    get:
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferWithItemsDTO'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get offer
      tags:
      - Offers
    put:
      consumes:
      - application/json
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Offer data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer
      tags:
      - Offers
  /offers/{id}/accept:
    post:
      consumes:
      - application/json
      description: Transitions an offer from sent phase to won phase. Optionally creates
        a project from the offer.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Accept options
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.AcceptOfferRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Accepted offer and optional project
          schema:
            $ref: '#/definitions/domain.AcceptOfferResponse'
        "400":
          description: Invalid offer ID, request body, or offer not in sent phase
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Accept offer
      tags:
      - Offers
  /offers/{id}/accept-order:
    post:
      consumes:
      - application/json
      description: Transitions a won offer to order phase, indicating work is beginning.
        This is used when a customer accepts a sent offer and work should start.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Accept order options
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.AcceptOrderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Offer transitioned to order phase
          schema:
            $ref: '#/definitions/domain.AcceptOrderResponse'
        "400":
          description: Invalid offer ID, request body, or offer not in valid phase
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Accept order
      tags:
      - Offers
  /offers/{id}/activities:
    get:
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - default: 50
        description: Limit
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.ActivityDTO'
            type: array
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get offer activities
      tags:
      - Offers
  /offers/{id}/advance:
    post:
      consumes:
      - application/json
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Phase data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.AdvanceOfferRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Advance offer phase
      tags:
      - Offers
  /offers/{id}/assignments:
    get:
      consumes:
      - application/json
      description: Returns all synced assignments (work orders) for a specific offer
      parameters:
      - description: Offer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.AssignmentDTO'
            type: array
        "400":
          description: Invalid offer ID
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List assignments for an offer
      tags:
      - Assignments
  /offers/{id}/assignments/summary:
    get:
      consumes:
      - application/json
      description: |-
        Returns aggregated assignment data with comparison to the offer value.
        Includes total FixedPriceAmount, count, and difference calculations.
      parameters:
      - description: Offer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.AssignmentSummaryDTO'
        "400":
          description: Invalid offer ID
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get assignment summary for an offer
      tags:
      - Assignments
  /offers/{id}/assignments/sync:
    post:
      consumes:
      - application/json
      description: |-
        Fetches assignments (work orders) from the ERP datawarehouse and syncs them to the local database.
        The offer must have an external_reference that matches the project Code in the ERP system.
      parameters:
      - description: Offer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.AssignmentSyncResultDTO'
        "400":
          description: Invalid offer ID
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Sync assignments for an offer
      tags:
      - Assignments
  /offers/{id}/budget:
    get:
      consumes:
      - application/json
      description: Get budget summary and all budget items for an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      summary: Get offer budget with items
      tags:
      - offers
      - budget
  /offers/{id}/budget/dimensions:
    get:
      consumes:
      - application/json
      description: Get all budget items belonging to a specific offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.BudgetItemDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      summary: List budget items for an offer
      tags:
      - offers
      - budget
    post:
      consumes:
      - application/json
      description: Add a new budget item to a specific offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Budget item details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.AddOfferBudgetItemRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.BudgetItemDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      summary: Add budget item to offer
      tags:
      - offers
      - budget
  /offers/{id}/budget/dimensions/{dimensionId}:
    delete:
      consumes:
      - application/json
      description: Delete a budget item from a specific offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Budget Item ID
        in: path
        name: dimensionId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      summary: Delete offer budget item
      tags:
      - offers
      - budget
    put:
      consumes:
      - application/json
      description: Update a budget item belonging to a specific offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Budget Item ID
        in: path
        name: dimensionId
        required: true
        type: string
      - description: Updated budget item details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateBudgetItemRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.BudgetItemDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      summary: Update offer budget item
      tags:
      - offers
      - budget
  /offers/{id}/budget/reorder:
    put:
      consumes:
      - application/json
      description: Reorder budget items for a specific offer by providing ordered
        IDs
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Ordered list of budget item IDs
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.ReorderBudgetItemsRequest'
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      summary: Reorder offer budget items
      tags:
      - offers
      - budget
  /offers/{id}/clone:
    post:
      consumes:
      - application/json
      description: Creates a copy of an existing offer. The cloned offer starts in
        draft phase.
      parameters:
      - description: Source Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Clone options
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CloneOfferRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Cloned offer
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid offer ID or request body
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Source offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Clone offer
      tags:
      - Offers
  /offers/{id}/complete:
    post:
      description: Transitions an offer from order phase to completed phase. Indicates
        work is finished.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Completed offer
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid offer ID or offer not in order phase
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Complete an offer
      tags:
      - Offers
  /offers/{id}/cost:
    put:
      consumes:
      - application/json
      description: Updates only the cost field of an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Cost data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferCostRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer cost
      tags:
      - Offers
  /offers/{id}/customer:
    put:
      consumes:
      - application/json
      description: Updates only the customer field of an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Customer data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferCustomerRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID, offer closed, or customer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer customer
      tags:
      - Offers
  /offers/{id}/customer-has-won-project:
    put:
      consumes:
      - application/json
      description: Updates the flag indicating whether the customer has won their
        project
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Customer has won project data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferCustomerHasWonProjectRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update customer has won project flag
      tags:
      - Offers
  /offers/{id}/description:
    put:
      consumes:
      - application/json
      description: Updates only the description field of an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Description data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferDescriptionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer description
      tags:
      - Offers
  /offers/{id}/detail:
    get:
      description: Get an offer including budget items and summary calculations
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Offer with budget details
          schema:
            $ref: '#/definitions/domain.OfferDetailDTO'
        "400":
          description: Invalid offer ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get offer with budget details
      tags:
      - Offers
  /offers/{id}/due-date:
    put:
      consumes:
      - application/json
      description: Updates only the due date field of an offer (can be null to clear)
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Due date data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferDueDateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer due date
      tags:
      - Offers
  /offers/{id}/end-date:
    put:
      consumes:
      - application/json
      description: Updates the end date of an offer. Used to record the expected or
        actual project end date.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: End date data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferEndDateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID, offer closed, or end date before start date
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer end date
      tags:
      - Offers
  /offers/{id}/expiration-date:
    put:
      consumes:
      - application/json
      description: Updates the expiration date of a sent offer. Used to extend the
        validity period for the customer to accept.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Expiration date data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferExpirationDateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID, offer not sent, or invalid date
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer expiration date
      tags:
      - Offers
  /offers/{id}/external-reference:
    put:
      consumes:
      - application/json
      description: Updates the external/customer reference number. Returns 409 if
        reference already exists for this company.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: External reference data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferExternalReferenceRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: External reference already exists for this company
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update external reference
      tags:
      - Offers
  /offers/{id}/external-sync:
    get:
      description: |-
        Syncs financial data from the data warehouse for the given offer and persists it.
        The offer must have an external_reference to be matched in the data warehouse.
        This endpoint queries the DW, persists the financial data to the offer, and returns the result.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Data warehouse financials with sync status
          schema:
            $ref: '#/definitions/domain.OfferExternalSyncResponse'
        "400":
          description: Invalid offer ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Sync data warehouse financials for an offer
      tags:
      - Offers
  /offers/{id}/files:
    get:
      description: Get all files attached to an offer
      parameters:
      - description: Offer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.FileDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List offer files
      tags:
      - Files
    post:
      consumes:
      - multipart/form-data
      description: Upload a file and attach it to an offer. Company is determined
        from the X-Company-Id header.
      parameters:
      - description: Offer ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: File to upload
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.FileDTO'
        "400":
          description: Missing company context or invalid request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "413":
          description: Request Entity Too Large
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Upload file to offer
      tags:
      - Files
  /offers/{id}/health:
    put:
      consumes:
      - application/json
      description: Updates the health status (on_track, at_risk, delayed, over_budget)
        and optionally the completion percentage of an offer in order phase. Used
        to track execution progress.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: 'Health data: health (enum: on_track|at_risk|delayed|over_budget),
          completionPercent (optional: 0-100)'
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferHealthRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated offer
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid offer ID, request body, or offer not in order phase
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer health status
      tags:
      - Offers
  /offers/{id}/invoiced:
    put:
      consumes:
      - application/json
      description: Updates the invoiced amount of an offer in order phase. Used to
        track how much has been invoiced to the customer.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Invoiced amount data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferInvoicedRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated offer
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid offer ID, request body, or offer not in order phase
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer invoiced amount
      tags:
      - Offers
  /offers/{id}/items:
    get:
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.OfferItemDTO'
            type: array
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get offer items
      tags:
      - Offers
    post:
      consumes:
      - application/json
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Item data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CreateOfferItemRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.OfferItemDTO'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Add offer item
      tags:
      - Offers
  /offers/{id}/notes:
    put:
      consumes:
      - application/json
      description: Updates only the notes field of an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Notes data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferNotesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer notes
      tags:
      - Offers
  /offers/{id}/offer-number:
    put:
      consumes:
      - application/json
      description: Updates the internal offer number (e.g., "TK-2025-001"). Returns
        409 if number already exists.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Offer number data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferNumberRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Offer number already exists
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer number
      tags:
      - Offers
  /offers/{id}/probability:
    put:
      consumes:
      - application/json
      description: Updates only the probability field of an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Probability data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferProbabilityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer probability
      tags:
      - Offers
  /offers/{id}/project:
    delete:
      description: Removes the project link from an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Unlink offer from project
      tags:
      - Offers
    put:
      consumes:
      - application/json
      description: Links an offer to an existing project
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Project data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferProjectRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID, offer closed, or project not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Link offer to project
      tags:
      - Offers
  /offers/{id}/recalculate:
    post:
      description: Recalculates the offer value from budget dimensions
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Updated offer
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid offer ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Recalculate offer totals
      tags:
      - Offers
  /offers/{id}/reject:
    post:
      consumes:
      - application/json
      description: Transitions an offer from sent phase to lost phase with an optional
        reason.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Rejection reason
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.RejectOfferRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Rejected offer
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid offer ID, request body, or offer not in sent phase
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Reject offer
      tags:
      - Offers
  /offers/{id}/reopen:
    post:
      description: Transitions an offer from completed phase back to order phase.
        Allows additional work on a finished order.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Reopened offer
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid offer ID or offer not in completed phase
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Reopen a completed offer
      tags:
      - Offers
  /offers/{id}/responsible:
    put:
      consumes:
      - application/json
      description: Updates only the responsible user field of an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Responsible user data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferResponsibleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer responsible user
      tags:
      - Offers
  /offers/{id}/send:
    post:
      description: Transitions an offer from draft or in_progress phase to sent phase.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Updated offer
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid offer ID or offer not in valid phase for sending
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Send offer to customer
      tags:
      - Offers
  /offers/{id}/sent-date:
    put:
      consumes:
      - application/json
      description: Updates the sent date of an offer. Used to record when the offer
        was sent to the customer.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Sent date data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferSentDateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer sent date
      tags:
      - Offers
  /offers/{id}/spent:
    put:
      consumes:
      - application/json
      description: Updates the spent amount of an offer in order phase. Used to track
        actual costs incurred during execution.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Spent amount data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferSpentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated offer
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid offer ID, request body, or offer not in order phase
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer spent amount
      tags:
      - Offers
  /offers/{id}/start-date:
    put:
      consumes:
      - application/json
      description: Updates the start date of an offer. Used to record the expected
        or actual project start date.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Start date data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferStartDateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID, offer closed, or end date before start date
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer start date
      tags:
      - Offers
  /offers/{id}/suppliers:
    get:
      description: Get all suppliers linked to an offer with their relationship details
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.OfferSupplierWithDetailsDTO'
            type: array
        "400":
          description: Invalid offer ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get offer suppliers
      tags:
      - Offers
    post:
      consumes:
      - application/json
      description: Links a supplier to an offer with optional status and notes
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Supplier data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.AddOfferSupplierRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.OfferSupplierWithDetailsDTO'
        "400":
          description: Invalid offer ID or request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer or supplier not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Supplier already linked to offer
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Add supplier to offer
      tags:
      - Offers
  /offers/{id}/suppliers/{supplierId}:
    delete:
      description: Removes the link between a supplier and an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Supplier ID
        in: path
        name: supplierId
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid offer or supplier ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer-supplier relationship not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Remove supplier from offer
      tags:
      - Offers
    put:
      consumes:
      - application/json
      description: Updates the status and/or notes of an offer-supplier relationship
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Supplier ID
        in: path
        name: supplierId
        required: true
        type: string
      - description: Update data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferSupplierRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferSupplierWithDetailsDTO'
        "400":
          description: Invalid offer or supplier ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer-supplier relationship not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer-supplier relationship
      tags:
      - Offers
  /offers/{id}/suppliers/{supplierId}/contact:
    put:
      consumes:
      - application/json
      description: Updates the contact person for an offer-supplier relationship.
        Pass null to clear the contact.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Supplier ID
        in: path
        name: supplierId
        required: true
        type: string
      - description: Contact data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferSupplierContactRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferSupplierWithDetailsDTO'
        "400":
          description: Invalid offer or supplier ID, or contact not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer-supplier relationship not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer-supplier contact person
      tags:
      - Offers
  /offers/{id}/suppliers/{supplierId}/notes:
    put:
      consumes:
      - application/json
      description: Updates only the notes of an offer-supplier relationship
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Supplier ID
        in: path
        name: supplierId
        required: true
        type: string
      - description: Notes data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferSupplierNotesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferSupplierWithDetailsDTO'
        "400":
          description: Invalid offer or supplier ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer-supplier relationship not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer-supplier notes
      tags:
      - Offers
  /offers/{id}/suppliers/{supplierId}/status:
    put:
      consumes:
      - application/json
      description: Updates only the status of an offer-supplier relationship
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Supplier ID
        in: path
        name: supplierId
        required: true
        type: string
      - description: Status data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferSupplierStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferSupplierWithDetailsDTO'
        "400":
          description: Invalid offer or supplier ID, or invalid status
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer-supplier relationship not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer-supplier status
      tags:
      - Offers
  /offers/{id}/title:
    put:
      consumes:
      - application/json
      description: Updates only the title field of an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Title data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferTitleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer title
      tags:
      - Offers
  /offers/{id}/value:
    put:
      consumes:
      - application/json
      description: Updates only the value field of an offer
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Value data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateOfferValueRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.OfferDTO'
        "400":
          description: Invalid ID or offer closed
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update offer value
      tags:
      - Offers
  /offers/{id}/win:
    post:
      consumes:
      - application/json
      description: Transitions an offer to won phase within a project context. This
        also transitions the project from tilbud to active phase, expires sibling
        offers, and sets the winning offer's number on the project.
      parameters:
      - description: Offer ID
        in: path
        name: id
        required: true
        type: string
      - description: Win options
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.WinOfferRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Won offer with project and expired sibling offers
          schema:
            $ref: '#/definitions/domain.WinOfferResponse'
        "400":
          description: Invalid offer ID, request body, offer not in project, or project
            not in tilbud phase
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Offer not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Win an offer within a project
      tags:
      - Offers
  /offers/{offerId}/suppliers/{supplierId}/files:
    get:
      description: Get all files attached to a specific supplier within an offer
      parameters:
      - description: Offer ID
        format: uuid
        in: path
        name: offerId
        required: true
        type: string
      - description: Supplier ID
        format: uuid
        in: path
        name: supplierId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.FileDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List offer-supplier files
      tags:
      - Files
    post:
      consumes:
      - multipart/form-data
      description: Upload a file and attach it to a specific supplier within an offer.
        Company is determined from the X-Company-Id header.
      parameters:
      - description: Offer ID
        format: uuid
        in: path
        name: offerId
        required: true
        type: string
      - description: Supplier ID
        format: uuid
        in: path
        name: supplierId
        required: true
        type: string
      - description: File to upload
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.FileDTO'
        "400":
          description: Missing company context or invalid request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "413":
          description: Request Entity Too Large
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Upload file to offer-supplier relationship
      tags:
      - Files
  /offers/admin/trigger-dw-sync:
    post:
      description: |-
        Manually triggers a sync of ALL offers with external_reference from the data warehouse (regardless of phase).
        Also syncs all assignments for offers in "order" phase. This is an admin-only endpoint for forcing a full sync outside of the scheduled cron job.
      produces:
      - application/json
      responses:
        "200":
          description: Sync results with synced/failed counts for offers and assignments
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden - requires super admin
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Trigger bulk data warehouse sync (Admin only)
      tags:
      - Offers
  /offers/next-number:
    get:
      description: Returns a preview of what the next offer number would be for a
        company without consuming the sequence. Useful for UI display.
      parameters:
      - description: Company ID
        enum:
        - gruppen
        - stalbygg
        - hybridbygg
        - industri
        - tak
        - montasje
        in: query
        name: companyId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.NextOfferNumberResponse'
        "400":
          description: Invalid or missing company ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get next offer number preview
      tags:
      - Offers
  /projects:
    get:
      consumes:
      - application/json
      description: Get paginated list of projects with optional filters
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page (max 200)
        in: query
        name: pageSize
        type: integer
      - description: Filter by customer ID
        format: uuid
        in: query
        name: customerId
        type: string
      - description: Filter by phase
        enum:
        - tilbud
        - working
        - on_hold
        - completed
        - cancelled
        in: query
        name: phase
        type: string
      - description: Sort field
        enum:
        - createdAt
        - updatedAt
        - name
        - phase
        - startDate
        - endDate
        - customerName
        in: query
        name: sortBy
        type: string
      - default: desc
        description: Sort order
        enum:
        - asc
        - desc
        in: query
        name: sortOrder
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.ProjectDTO'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List projects
      tags:
      - Projects
    post:
      consumes:
      - application/json
      description: Create a new project (simplified container for offers). Only name,
        description, startDate, and endDate can be set on creation. Phase defaults
        to "tilbud". Location and customer are inferred from linked offers.
      parameters:
      - description: Project data (name required, description/startDate/endDate optional)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CreateProjectRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.ProjectDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create project
      tags:
      - Projects
  /projects/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a project
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete project
      tags:
      - Projects
    get:
      consumes:
      - application/json
      description: Get a project with details including recent activities
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ProjectWithDetailsDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get project by ID
      tags:
      - Projects
    put:
      consumes:
      - application/json
      description: Update an existing project
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Project data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateProjectRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ProjectDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update project
      tags:
      - Projects
  /projects/{id}/activities:
    get:
      consumes:
      - application/json
      description: Get recent activities for a project
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - default: 50
        description: Limit
        in: query
        maximum: 200
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.ActivityDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get project activities
      tags:
      - Projects
  /projects/{id}/dates:
    put:
      consumes:
      - application/json
      description: Update the start and end dates of a project
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Dates data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateProjectDatesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ProjectDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update project dates
      tags:
      - Projects
  /projects/{id}/description:
    put:
      consumes:
      - application/json
      description: Update the summary and description of a project
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Description data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateProjectDescriptionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ProjectDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update project description
      tags:
      - Projects
  /projects/{id}/files:
    get:
      description: Get all files attached to a project
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.FileDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List project files
      tags:
      - Files
    post:
      consumes:
      - multipart/form-data
      description: Upload a file and attach it to a project. Company is determined
        from the X-Company-Id header.
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: File to upload
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.FileDTO'
        "400":
          description: Missing company context or invalid request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "413":
          description: Request Entity Too Large
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Upload file to project
      tags:
      - Files
  /projects/{id}/name:
    put:
      consumes:
      - application/json
      description: Update only the name of a project
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Name data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateProjectNameRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ProjectDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update project name
      tags:
      - Projects
  /projects/{id}/offers:
    get:
      consumes:
      - application/json
      description: Get all offers linked to a project (offer folder model)
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.OfferDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Project not found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get offers for a project
      tags:
      - Projects
  /projects/{id}/phase:
    put:
      consumes:
      - application/json
      description: Update only the phase of a project
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Phase data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateProjectPhaseRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ProjectDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update project phase
      tags:
      - Projects
  /projects/{id}/project-number:
    put:
      consumes:
      - application/json
      description: Update the project number of a project
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Project number data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateProjectNumberRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ProjectDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update project number
      tags:
      - Projects
  /projects/{id}/reopen:
    post:
      consumes:
      - application/json
      description: Reopens a project that was completed or cancelled. Can reopen to
        tilbud or working phase.
      parameters:
      - description: Project ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Reopen configuration
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.ReopenProjectRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.ReopenProjectResponse'
        "400":
          description: Invalid request, phase transition, or project not in closed
            state
          schema:
            $ref: '#/definitions/domain.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Project not found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Reopen a completed or cancelled project
      tags:
      - Projects
  /search:
    get:
      parameters:
      - description: Search query
        in: query
        name: q
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SearchResult'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Global search
      tags:
      - Search
  /suppliers:
    get:
      consumes:
      - application/json
      description: Get paginated list of suppliers with optional filters
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page (max 200)
        in: query
        name: pageSize
        type: integer
      - description: Search by name or organization number
        in: query
        name: search
        type: string
      - description: Filter by city
        in: query
        name: city
        type: string
      - description: Filter by country
        in: query
        name: country
        type: string
      - description: Filter by status
        enum:
        - active
        - inactive
        - pending
        - blacklisted
        in: query
        name: status
        type: string
      - description: Filter by category
        in: query
        name: category
        type: string
      - description: Sort field
        enum:
        - createdAt
        - updatedAt
        - name
        - city
        - country
        - status
        - category
        - orgNumber
        in: query
        name: sortBy
        type: string
      - default: desc
        description: Sort order
        enum:
        - asc
        - desc
        in: query
        name: sortOrder
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.SupplierDTO'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List suppliers
      tags:
      - Suppliers
    post:
      consumes:
      - application/json
      description: Create a new supplier
      parameters:
      - description: Supplier data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CreateSupplierRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Duplicate organization number
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create supplier
      tags:
      - Suppliers
  /suppliers/{id}:
    delete:
      consumes:
      - application/json
      description: Soft delete a supplier. The supplier is hidden from lists but preserved
        for historical reference.
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Supplier has active relationships
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete supplier
      tags:
      - Suppliers
    get:
      consumes:
      - application/json
      description: Get a supplier with full details including stats, contacts, and
        recent offers
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierWithDetailsDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get supplier by ID
      tags:
      - Suppliers
    put:
      consumes:
      - application/json
      description: Update an existing supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Supplier data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Duplicate organization number
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier
      tags:
      - Suppliers
  /suppliers/{id}/address:
    put:
      consumes:
      - application/json
      description: Update only the address of a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Address data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierAddressRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier address
      tags:
      - Suppliers
  /suppliers/{id}/category:
    put:
      consumes:
      - application/json
      description: Update only the category of a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Category data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierCategoryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier category
      tags:
      - Suppliers
  /suppliers/{id}/city:
    put:
      consumes:
      - application/json
      description: Update only the city of a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: City data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierCityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier city
      tags:
      - Suppliers
  /suppliers/{id}/contacts:
    get:
      consumes:
      - application/json
      description: Get all contact persons for a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.SupplierContactDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List contacts for a supplier
      tags:
      - Suppliers
    post:
      consumes:
      - application/json
      description: Create a new contact person for a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Contact data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.CreateSupplierContactRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.SupplierContactDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create a contact for a supplier
      tags:
      - Suppliers
  /suppliers/{id}/contacts/{contactId}:
    delete:
      consumes:
      - application/json
      description: Delete a contact person for a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Contact ID
        format: uuid
        in: path
        name: contactId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Contact is assigned to active offers
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete a supplier contact
      tags:
      - Suppliers
    get:
      consumes:
      - application/json
      description: Get a specific contact person for a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Contact ID
        format: uuid
        in: path
        name: contactId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierContactDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get a supplier contact by ID
      tags:
      - Suppliers
    put:
      consumes:
      - application/json
      description: Update a contact person for a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Contact ID
        format: uuid
        in: path
        name: contactId
        required: true
        type: string
      - description: Contact data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierContactRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierContactDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update a supplier contact
      tags:
      - Suppliers
  /suppliers/{id}/email:
    put:
      consumes:
      - application/json
      description: Update only the email of a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Email data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierEmailRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier email
      tags:
      - Suppliers
  /suppliers/{id}/files:
    get:
      description: Get all files attached to a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.FileDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List supplier files
      tags:
      - Files
    post:
      consumes:
      - multipart/form-data
      description: Upload a file and attach it to a supplier. Company is determined
        from the X-Company-Id header.
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: File to upload
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.FileDTO'
        "400":
          description: Missing company context or invalid request
          schema:
            $ref: '#/definitions/domain.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.APIError'
        "413":
          description: Request Entity Too Large
          schema:
            $ref: '#/definitions/domain.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.APIError'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Upload file to supplier
      tags:
      - Files
  /suppliers/{id}/notes:
    put:
      consumes:
      - application/json
      description: Update only the notes of a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Notes data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierNotesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier notes
      tags:
      - Suppliers
  /suppliers/{id}/offers:
    get:
      consumes:
      - application/json
      description: Get paginated list of offers associated with a supplier via the
        offer_suppliers junction table
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page (max 200)
        in: query
        name: pageSize
        type: integer
      - description: Filter by phase
        enum:
        - draft
        - in_progress
        - sent
        - order
        - completed
        - won
        - lost
        - expired
        in: query
        name: phase
        type: string
      - description: Sort field
        enum:
        - createdAt
        - updatedAt
        - title
        - value
        - probability
        - phase
        - status
        - dueDate
        - customerName
        in: query
        name: sortBy
        type: string
      - default: desc
        description: Sort order
        enum:
        - asc
        - desc
        in: query
        name: sortOrder
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.OfferDTO'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List offers for a supplier
      tags:
      - Suppliers
  /suppliers/{id}/payment-terms:
    put:
      consumes:
      - application/json
      description: Update only the payment terms of a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Payment terms data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierPaymentTermsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier payment terms
      tags:
      - Suppliers
  /suppliers/{id}/phone:
    put:
      consumes:
      - application/json
      description: Update only the phone of a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Phone data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierPhoneRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier phone
      tags:
      - Suppliers
  /suppliers/{id}/postal-code:
    put:
      consumes:
      - application/json
      description: Update only the postal code of a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Postal code data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierPostalCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier postal code
      tags:
      - Suppliers
  /suppliers/{id}/status:
    put:
      consumes:
      - application/json
      description: Update only the status of a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Status data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier status
      tags:
      - Suppliers
  /suppliers/{id}/website:
    put:
      consumes:
      - application/json
      description: Update only the website of a supplier
      parameters:
      - description: Supplier ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: Website data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateSupplierWebsiteRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SupplierDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update supplier website
      tags:
      - Suppliers
  /users:
    get:
      description: Returns a list of active users. Super admins and gruppen users
        see all users. Regular users see only users from their company.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.UserDTO'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List users
      tags:
      - Users
securityDefinitions:
  ApiKeyAuth:
    description: API Key for system operations
    in: header
    name: x-api-key
    type: apiKey
  BearerAuth:
    description: JWT Bearer token
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
